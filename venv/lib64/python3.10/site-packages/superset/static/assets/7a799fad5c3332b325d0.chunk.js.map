{"version":3,"file":"7a799fad5c3332b325d0.chunk.js","mappings":"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","sources":["webpack://superset/./packages/superset-ui-core/src/chart/components/reactify.tsx","webpack://superset/./packages/superset-ui-core/src/color/index.ts","webpack://superset/./packages/superset-ui-core/src/dimension/computeMaxFontSize.ts","webpack://superset/./packages/superset-ui-core/src/dimension/getMultipleTextDimensions.ts","webpack://superset/./packages/superset-ui-core/src/dimension/getTextDimension.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/LazyFactory.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/constants.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/factories.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/createHiddenSvgNode.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/createTextNode.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/getBBoxCeil.ts","webpack://superset/./packages/superset-ui-core/src/dimension/svg/updateTextNode.ts","webpack://superset/./packages/superset-ui-core/src/hooks/useComponentDidUpdate/useComponentDidUpdate.ts","webpack://superset/./packages/superset-ui-core/src/hooks/useElementOnScreen/useElementOnScreen.ts","webpack://superset/./packages/superset-ui-core/src/hooks/useTruncation/useChildElementTruncation.ts","webpack://superset/./packages/superset-ui-core/src/utils/promiseTimeout.ts","webpack://superset/./packages/superset-ui-core/src/utils/lruCache.ts","webpack://superset/./packages/superset-ui-core/src/query/types/PostProcessing.ts","webpack://superset/./packages/superset-ui-core/src/query/types/Time.ts","webpack://superset/./packages/superset-ui-core/src/translation/types/jed.ts","webpack://superset/./packages/superset-ui-core/src/translation/types/index.ts","webpack://superset/./packages/superset-ui-core/src/connection/types.ts","webpack://superset/./packages/superset-ui-core/src/query/api/legacy/getFormData.ts","webpack://superset/./packages/superset-ui-core/src/query/api/legacy/getDatasourceMetadata.ts","webpack://superset/./packages/superset-ui-core/src/query/api/legacy/types.ts","webpack://superset/./packages/superset-ui-core/src/query/api/v1/index.ts","webpack://superset/./packages/superset-ui-core/src/number-format/factories/createSiAtMostNDigitFormatter.ts","webpack://superset/./packages/superset-ui-core/src/time-format/utils/denormalizeTimestamp.ts","webpack://superset/./packages/superset-ui-core/src/dimension/mergeMargin.ts","webpack://superset/./packages/superset-ui-core/src/dimension/types.ts","webpack://superset/./packages/superset-ui-core/src/validator/validateInteger.ts","webpack://superset/./packages/superset-ui-core/src/chart/clients/ChartClient.ts","webpack://superset/./packages/superset-ui-core/src/chart/components/ChartDataProvider.tsx","webpack://superset/./packages/superset-ui-core/src/chart/types/TransformFunction.ts","webpack://superset/./packages/superset-ui-core/src/chart/types/QueryResponse.ts","webpack://superset/./packages/superset-ui-core/src/chart-composition/ChartFrame.tsx","webpack://superset/./packages/superset-ui-core/src/chart-composition/legend/WithLegend.tsx","webpack://superset/./packages/superset-ui-core/src/chart-composition/tooltip/TooltipFrame.tsx","webpack://superset/./packages/superset-ui-core/src/chart-composition/tooltip/TooltipTable.tsx","webpack://superset/./packages/superset-ui-core/src/time-format/formatters/finestTemporalGrain.ts","webpack://superset/./packages/superset-ui-core/src/utils/getSelectedText.ts","webpack://superset/./packages/superset-ui-core/src/utils/html.tsx","webpack://superset/./packages/superset-ui-core/src/utils/random.ts","webpack://superset/./packages/superset-ui-core/src/utils/typedMemo.ts"],"sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\n\n// TODO: Note that id and className can collide between Props and ReactifyProps\n// leading to (likely) unexpected behaviors. We should either require Props to not\n// contain an id/className, or not combine them (via intersection), instead preferring\n// wrapping (composition). As an example:\n// interface MyProps {\n//   id: number;\n// }\n// function myRender(container: HTMLDivElement, props: Readonly<MyProps>): void {\n//   props.id // unusable: id is string & number\n// }\n// new (reactify(myRender))({ id: 5 }); // error: id has to be string & number\n\nexport type ReactifyProps = {\n  id?: string;\n  className?: string;\n};\n\n// TODO: add more React lifecycle callbacks as needed\nexport type LifeCycleCallbacks = {\n  componentWillUnmount?: () => void;\n};\n\nexport interface RenderFuncType<Props> {\n  (container: HTMLDivElement, props: Readonly<Props & ReactifyProps>): void;\n  displayName?: string;\n  defaultProps?: Partial<Props & ReactifyProps>;\n  propTypes?: React.WeakValidationMap<Props & ReactifyProps>;\n}\n\nexport default function reactify<Props extends object>(\n  renderFn: RenderFuncType<Props>,\n  callbacks?: LifeCycleCallbacks,\n): React.ComponentClass<Props & ReactifyProps> {\n  class ReactifiedComponent extends React.Component<Props & ReactifyProps> {\n    container?: HTMLDivElement;\n\n    constructor(props: Props & ReactifyProps) {\n      super(props);\n      this.setContainerRef = this.setContainerRef.bind(this);\n    }\n\n    componentDidMount() {\n      this.execute();\n    }\n\n    componentDidUpdate() {\n      this.execute();\n    }\n\n    componentWillUnmount() {\n      this.container = undefined;\n      if (callbacks?.componentWillUnmount) {\n        callbacks.componentWillUnmount.bind(this)();\n      }\n    }\n\n    setContainerRef(ref: HTMLDivElement) {\n      this.container = ref;\n    }\n\n    execute() {\n      if (this.container) {\n        renderFn(this.container, this.props);\n      }\n    }\n\n    render() {\n      const { id, className } = this.props;\n\n      return <div ref={this.setContainerRef} id={id} className={className} />;\n    }\n  }\n\n  const ReactifiedClass: React.ComponentClass<Props & ReactifyProps> =\n    ReactifiedComponent;\n\n  if (renderFn.displayName) {\n    ReactifiedClass.displayName = renderFn.displayName;\n  }\n  // eslint-disable-next-line react/forbid-foreign-prop-types\n  if (renderFn.propTypes) {\n    ReactifiedClass.propTypes = {\n      ...ReactifiedClass.propTypes,\n      ...renderFn.propTypes,\n    };\n  }\n  if (renderFn.defaultProps) {\n    ReactifiedClass.defaultProps = renderFn.defaultProps;\n  }\n\n  return ReactifiedComponent;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport * as CategoricalColorNamespace from './CategoricalColorNamespace';\n\nexport { CategoricalColorNamespace };\nexport { default as CategoricalColorScale } from './CategoricalColorScale';\nexport { default as CategoricalScheme } from './CategoricalScheme';\nexport * from './CategoricalScheme';\nexport { default as getCategoricalSchemeRegistry } from './CategoricalSchemeRegistrySingleton';\nexport { default as ColorScheme } from './ColorScheme';\nexport * from './ColorScheme';\nexport { default as getSequentialSchemeRegistry } from './SequentialSchemeRegistrySingleton';\nexport { default as SequentialScheme } from './SequentialScheme';\nexport * from './SequentialScheme';\nexport { default as ColorSchemeRegistry } from './ColorSchemeRegistry';\nexport * from './colorSchemes';\nexport * from './utils';\nexport * from './types';\nexport {\n  default as getSharedLabelColor,\n  SharedLabelColor,\n  SharedLabelColorSource,\n} from './SharedLabelColorSingleton';\n\nexport const BRAND_COLOR = '#00A699';\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport getTextDimension, { GetTextDimensionInput } from './getTextDimension';\nimport { Dimension } from './types';\n\nfunction decreaseSizeUntil(\n  startSize: number,\n  computeDimension: (size: number) => Dimension,\n  condition: (dimension: Dimension) => boolean,\n): number {\n  let size = startSize;\n  let dimension = computeDimension(size);\n\n  while (!condition(dimension)) {\n    size -= 1;\n\n    // Here if the size goes below zero most likely is because it\n    // has additional style applied in which case we assume the user\n    // knows what it's doing and we just let them use that.\n    // Visually it works, although it could have another\n    // check in place.\n    if (size < 0) {\n      size = startSize;\n      break;\n    }\n\n    dimension = computeDimension(size);\n  }\n\n  return size;\n}\n\nexport default function computeMaxFontSize(\n  input: GetTextDimensionInput & {\n    maxWidth?: number;\n    maxHeight?: number;\n    idealFontSize?: number;\n  },\n) {\n  const { idealFontSize, maxWidth, maxHeight, style, ...rest } = input;\n\n  let size: number;\n  if (idealFontSize !== undefined && idealFontSize !== null) {\n    size = idealFontSize;\n  } else if (maxHeight === undefined || maxHeight === null) {\n    throw new Error(\n      'You must specify at least one of maxHeight or idealFontSize',\n    );\n  } else {\n    size = Math.floor(maxHeight);\n  }\n\n  function computeDimension(fontSize: number) {\n    return getTextDimension({\n      ...rest,\n      style: { ...style, fontSize: `${fontSize}px` },\n    });\n  }\n\n  if (maxWidth !== undefined && maxWidth !== null) {\n    size = decreaseSizeUntil(\n      size,\n      computeDimension,\n      dim => dim.width > 0 && dim.width <= maxWidth,\n    );\n  }\n\n  if (maxHeight !== undefined && maxHeight !== null) {\n    size = decreaseSizeUntil(\n      size,\n      computeDimension,\n      dim => dim.height > 0 && dim.height <= maxHeight,\n    );\n  }\n\n  return size;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TextStyle, Dimension } from './types';\nimport getBBoxCeil from './svg/getBBoxCeil';\nimport { hiddenSvgFactory, textFactory } from './svg/factories';\nimport updateTextNode from './svg/updateTextNode';\n\n/**\n * get dimensions of multiple texts with same style\n * @param input\n * @param defaultDimension\n */\nexport default function getMultipleTextDimensions(\n  input: {\n    className?: string;\n    container?: HTMLElement;\n    style?: TextStyle;\n    texts: string[];\n  },\n  defaultDimension?: Dimension,\n): Dimension[] {\n  const { texts, className, style, container } = input;\n\n  const cache = new Map<string, Dimension>();\n  // for empty string\n  cache.set('', { height: 0, width: 0 });\n  let textNode: SVGTextElement | undefined;\n  let svgNode: SVGSVGElement | undefined;\n\n  const dimensions = texts.map(text => {\n    // Check if this string has been computed already\n    if (cache.has(text)) {\n      return cache.get(text) as Dimension;\n    }\n\n    // Lazy creation of text and svg nodes\n    if (!textNode) {\n      svgNode = hiddenSvgFactory.createInContainer(container);\n      textNode = textFactory.createInContainer(svgNode);\n    }\n\n    // Update text and get dimension\n    updateTextNode(textNode, { className, style, text });\n    const dimension = getBBoxCeil(textNode, defaultDimension);\n    // Store result to cache\n    cache.set(text, dimension);\n\n    return dimension;\n  });\n\n  // Remove svg node, if any\n  if (svgNode && textNode) {\n    // The nodes are added to the DOM briefly only to make getBBox works.\n    // (If not added to DOM getBBox will always return 0x0.)\n    // After that the svg nodes are not needed.\n    // We delay its removal in case there are subsequent calls to this function\n    // that can reuse the svg nodes.\n    // Experiments have shown that reusing existing nodes\n    // instead of deleting and adding new ones can save lot of time.\n    setTimeout(() => {\n      textFactory.removeFromContainer(svgNode);\n      hiddenSvgFactory.removeFromContainer(container);\n    }, 500);\n  }\n\n  return dimensions;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TextStyle, Dimension } from './types';\nimport updateTextNode from './svg/updateTextNode';\nimport getBBoxCeil from './svg/getBBoxCeil';\nimport { hiddenSvgFactory, textFactory } from './svg/factories';\n\nexport interface GetTextDimensionInput {\n  className?: string;\n  container?: HTMLElement;\n  style?: TextStyle;\n  text: string;\n}\n\nexport default function getTextDimension(\n  input: GetTextDimensionInput,\n  defaultDimension?: Dimension,\n): Dimension {\n  const { text, className, style, container } = input;\n\n  // Empty string\n  if (text.length === 0) {\n    return { height: 0, width: 0 };\n  }\n\n  const svgNode = hiddenSvgFactory.createInContainer(container);\n  const textNode = textFactory.createInContainer(svgNode);\n  updateTextNode(textNode, { className, style, text });\n  const dimension = getBBoxCeil(textNode, defaultDimension);\n\n  // The nodes are added to the DOM briefly only to make getBBox works.\n  // (If not added to DOM getBBox will always return 0x0.)\n  // After that the svg nodes are not needed.\n  // We delay its removal in case there are subsequent calls to this function\n  // that can reuse the svg nodes.\n  // Experiments have shown that reusing existing nodes\n  // instead of deleting and adding new ones can save lot of time.\n  setTimeout(() => {\n    textFactory.removeFromContainer(svgNode);\n    hiddenSvgFactory.removeFromContainer(container);\n  }, 500);\n\n  return dimension;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport default class LazyFactory<T extends HTMLElement | SVGElement> {\n  private activeNodes = new Map<\n    HTMLElement | SVGElement,\n    {\n      counter: number;\n      node: T;\n    }\n  >();\n\n  private factoryFn: () => T;\n\n  constructor(factoryFn: () => T) {\n    this.factoryFn = factoryFn;\n  }\n\n  createInContainer(container: HTMLElement | SVGElement = document.body) {\n    if (this.activeNodes.has(container)) {\n      const entry = this.activeNodes.get(container)!;\n      entry.counter += 1;\n\n      return entry.node;\n    }\n\n    const node = this.factoryFn();\n    container.append(node);\n    this.activeNodes.set(container, { counter: 1, node });\n\n    return node;\n  }\n\n  removeFromContainer(container: HTMLElement | SVGElement = document.body) {\n    if (this.activeNodes.has(container)) {\n      const entry = this.activeNodes.get(container)!;\n      entry.counter -= 1;\n      if (entry.counter === 0) {\n        container.removeChild(entry.node);\n        this.activeNodes.delete(container);\n      }\n    }\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n// eslint-disable-next-line import/prefer-default-export\nexport const SVG_NS = 'http://www.w3.org/2000/svg';\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport LazyFactory from './LazyFactory';\nimport createHiddenSvgNode from './createHiddenSvgNode';\nimport createTextNode from './createTextNode';\n\nexport const hiddenSvgFactory = new LazyFactory(createHiddenSvgNode);\nexport const textFactory = new LazyFactory(createTextNode);\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SVG_NS } from './constants';\n\nexport default function createHiddenSvgNode() {\n  const svgNode = document.createElementNS(SVG_NS, 'svg');\n  svgNode.style.position = 'absolute'; // so it won't disrupt page layout\n  svgNode.style.top = '-100%';\n  svgNode.style.left = '-100%';\n  svgNode.style.width = '0'; // no dimensions\n  svgNode.style.height = '0';\n  svgNode.style.opacity = '0'; // not visible\n  svgNode.style.pointerEvents = 'none'; // won't capture mouse events\n\n  return svgNode;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SVG_NS } from './constants';\n\nexport default function createTextNode() {\n  return document.createElementNS(SVG_NS, 'text');\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Dimension } from '../types';\n\nconst DEFAULT_DIMENSION = { height: 20, width: 100 };\n\nexport default function getBBoxCeil(\n  node: SVGGraphicsElement,\n  defaultDimension: Dimension = DEFAULT_DIMENSION,\n) {\n  const { width, height } = node.getBBox ? node.getBBox() : defaultDimension;\n\n  return {\n    height: Math.ceil(height),\n    width: Math.ceil(width),\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TextStyle } from '../types';\n\nconst STYLE_FIELDS: (keyof TextStyle)[] = [\n  'font',\n  'fontWeight',\n  'fontStyle',\n  'fontSize',\n  'fontFamily',\n  'letterSpacing',\n];\n\nexport default function updateTextNode(\n  node: SVGTextElement,\n  {\n    className,\n    style = {},\n    text,\n  }: {\n    className?: string;\n    style?: TextStyle;\n    text?: string;\n  } = {},\n) {\n  const textNode = node;\n\n  if (textNode.textContent !== text) {\n    textNode.textContent = typeof text === 'undefined' ? null : text;\n  }\n  if (textNode.getAttribute('class') !== className) {\n    textNode.setAttribute('class', className ?? '');\n  }\n\n  // Clear style\n  // Note: multi-word property names are hyphenated and not camel-cased.\n  textNode.style.removeProperty('font');\n  textNode.style.removeProperty('font-weight');\n  textNode.style.removeProperty('font-style');\n  textNode.style.removeProperty('font-size');\n  textNode.style.removeProperty('font-family');\n  textNode.style.removeProperty('letter-spacing');\n\n  // Apply new style\n  // Note: the font field will auto-populate other font fields when applicable.\n  STYLE_FIELDS.filter(\n    (field: keyof TextStyle) =>\n      typeof style[field] !== 'undefined' && style[field] !== null,\n  ).forEach((field: keyof TextStyle) => {\n    textNode.style[field] = `${style[field]}`;\n  });\n\n  return textNode;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { EffectCallback, useEffect, useRef } from 'react';\n\nexport const useComponentDidUpdate = (effect: EffectCallback) => {\n  const isMountedRef = useRef(false);\n  useEffect(() => {\n    if (isMountedRef.current) {\n      effect();\n    } else {\n      isMountedRef.current = true;\n    }\n  }, [effect]);\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useRef, useState, RefObject } from 'react';\n\nexport function useElementOnScreen<T extends Element>(\n  options: IntersectionObserverInit,\n): [RefObject<T>, boolean] {\n  const containerRef = useRef<T>(null);\n  const [isSticky, setIsSticky] = useState(false);\n\n  const callback = (entries: IntersectionObserverEntry[]) => {\n    const [entry] = entries;\n    setIsSticky(entry.intersectionRatio < 1);\n  };\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(callback, options);\n    const element = containerRef.current;\n    if (element) {\n      observer.observe(element);\n    }\n    return () => {\n      if (element) {\n        observer.unobserve(element);\n      }\n    };\n  }, [containerRef, options]);\n\n  return [containerRef, isSticky];\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useLayoutEffect, useRef, useState } from 'react';\n\n/**\n * This hook encapsulates logic to support truncation of child HTML\n * elements contained in a fixed-width parent HTML element.  Given\n * a ref to the parent element and optionally a ref to the \"+x\"\n * component that shows the number of truncated items, this hook\n * will return the number of elements that are not fully visible\n * (including those completely hidden) and whether any elements\n * are completely hidden.\n */\nconst useChildElementTruncation = () => {\n  const [elementsTruncated, setElementsTruncated] = useState(0);\n  const [hasHiddenElements, setHasHiddenElements] = useState(false);\n  const elementRef = useRef<HTMLDivElement>(null);\n  const plusRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    const onResize = () => {\n      const currentElement = elementRef.current;\n      if (!currentElement) {\n        return;\n      }\n      const plusRefElement = plusRef.current;\n      const { scrollWidth, clientWidth, childNodes } = currentElement;\n\n      if (scrollWidth > clientWidth) {\n        // \"...\" is around 6px wide\n        const truncationWidth = 6;\n        const plusSize = plusRefElement?.offsetWidth || 0;\n        const maxWidth = clientWidth - truncationWidth;\n        const elementsCount = childNodes.length;\n\n        let width = 0;\n        let hiddenElements = 0;\n        for (let i = 0; i < elementsCount; i += 1) {\n          const itemWidth = (childNodes[i] as HTMLElement).offsetWidth;\n          const remainingWidth = maxWidth - width - plusSize;\n\n          // assures it shows +{number} only when the item is not visible\n          if (remainingWidth <= 0) {\n            hiddenElements += 1;\n          }\n          width += itemWidth;\n        }\n\n        if (elementsCount > 1 && hiddenElements) {\n          setHasHiddenElements(true);\n          setElementsTruncated(hiddenElements);\n        } else {\n          setHasHiddenElements(false);\n          setElementsTruncated(1);\n        }\n      } else {\n        setHasHiddenElements(false);\n        setElementsTruncated(0);\n      }\n    };\n    const obs = new ResizeObserver(onResize);\n\n    const element = elementRef.current?.parentElement;\n    if (element) {\n      obs.observe(element);\n    }\n\n    onResize();\n\n    return () => {\n      obs.disconnect();\n    };\n  }, [plusRef.current]); // plus is rendered dynamically - the component rerenders the hook when plus appears, this makes sure that useLayoutEffect is rerun\n\n  return [elementRef, plusRef, elementsTruncated, hasHiddenElements] as const;\n};\n\nexport default useChildElementTruncation;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/** setTimeout that returns a promise */\nexport default function promiseTimeout<T>(\n  /** A function to be executed after the timer expires. */\n  func: (...args: unknown[]) => T,\n  /** The time, in milliseconds (thousandths of a second), the timer should wait before the specified function or code is executed. If this parameter is omitted, a value of 0 is used, meaning execute \"immediately\", or more accurately, as soon as possible.  */\n  delay?: number,\n) {\n  return new Promise<T>(resolve => {\n    setTimeout(() => {\n      resolve(func());\n    }, delay);\n  });\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nclass LRUCache<T> {\n  private cache: Map<string, T>;\n\n  readonly capacity: number;\n\n  constructor(capacity: number) {\n    if (capacity < 1) {\n      throw new Error('The capacity in LRU must be greater than 0.');\n    }\n    this.capacity = capacity;\n    this.cache = new Map<string, T>();\n  }\n\n  public has(key: string): boolean {\n    return this.cache.has(key);\n  }\n\n  public get(key: string): T | undefined {\n    // Prevent runtime errors\n    if (typeof key !== 'string') {\n      throw new TypeError('The LRUCache key must be string.');\n    }\n\n    if (this.cache.has(key)) {\n      const tmp = this.cache.get(key) as T;\n      this.cache.delete(key);\n      this.cache.set(key, tmp);\n      return tmp;\n    }\n    return undefined;\n  }\n\n  public set(key: string, value: T) {\n    // Prevent runtime errors\n    if (typeof key !== 'string') {\n      throw new TypeError('The LRUCache key must be string.');\n    }\n    if (this.cache.size >= this.capacity) {\n      this.cache.delete(this.cache.keys().next().value);\n    }\n    this.cache.set(key, value);\n  }\n\n  public clear() {\n    this.cache.clear();\n  }\n\n  public get size() {\n    return this.cache.size;\n  }\n}\n\nexport function lruCache<T>(capacity = 100) {\n  return new LRUCache<T>(capacity);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JsonObject } from '../../connection';\nimport { TimeGranularity } from '../../time-format';\nimport { RollingType, ComparisonType } from './AdvancedAnalytics';\n\nexport type NumpyFunction =\n  | 'average'\n  | 'argmin'\n  | 'argmax'\n  | 'count'\n  | 'count_nonzero'\n  | 'cumsum'\n  | 'cumprod'\n  | 'max'\n  | 'mean'\n  | 'median'\n  | 'nansum'\n  | 'nanmin'\n  | 'nanmax'\n  | 'nanmean'\n  | 'nanmedian'\n  | 'nanpercentile'\n  | 'min'\n  | 'percentile'\n  | 'prod'\n  | 'product'\n  | 'std'\n  | 'sum'\n  | 'var';\n\nexport enum PandasAxis {\n  Row = 0,\n  Column = 1,\n}\n\nexport interface Aggregates {\n  /**\n   * The name of the generated aggregate column.\n   */\n  [colname: string]: {\n    operator: NumpyFunction;\n    /**\n     * the name of the column to generate aggregates from.\n     */\n    column?: string;\n    options?: JsonObject;\n  };\n}\n\nexport type DefaultPostProcessing = undefined;\n\ninterface _PostProcessingAggregation {\n  operation: 'aggregation';\n  options: {\n    groupby: string[];\n    aggregates: Aggregates;\n  };\n}\nexport type PostProcessingAggregation =\n  | _PostProcessingAggregation\n  | DefaultPostProcessing;\n\nexport type BoxPlotQueryObjectWhiskerType = 'tukey' | 'min/max' | 'percentile';\ninterface _PostProcessingBoxplot {\n  operation: 'boxplot';\n  options: {\n    groupby: string[];\n    metrics: string[];\n    whisker_type: BoxPlotQueryObjectWhiskerType;\n    percentiles?: [number, number];\n  };\n}\nexport type PostProcessingBoxplot =\n  | _PostProcessingBoxplot\n  | DefaultPostProcessing;\n\ninterface _PostProcessingContribution {\n  operation: 'contribution';\n  options?: {\n    orientation?: 'row' | 'column';\n    columns?: string[];\n    rename_columns?: string[];\n  };\n}\nexport type PostProcessingContribution =\n  | _PostProcessingContribution\n  | DefaultPostProcessing;\n\ninterface _PostProcessingPivot {\n  operation: 'pivot';\n  options: {\n    aggregates: Aggregates;\n    column_fill_value?: string;\n    columns: string[];\n    combine_value_with_metric?: boolean;\n    drop_missing_columns?: boolean;\n    index: string[];\n    marginal_distribution_name?: string;\n    marginal_distributions?: boolean;\n    metric_fill_value?: any;\n  };\n}\nexport type PostProcessingPivot = _PostProcessingPivot | DefaultPostProcessing;\n\ninterface _PostProcessingProphet {\n  operation: 'prophet';\n  options: {\n    time_grain: TimeGranularity | undefined;\n    periods: number;\n    confidence_interval: number;\n    yearly_seasonality?: boolean | number;\n    weekly_seasonality?: boolean | number;\n    daily_seasonality?: boolean | number;\n  };\n}\nexport type PostProcessingProphet =\n  | _PostProcessingProphet\n  | DefaultPostProcessing;\n\ninterface _PostProcessingDiff {\n  operation: 'diff';\n  options: {\n    columns: string[];\n    periods: number;\n    axis: PandasAxis;\n  };\n}\nexport type PostProcessingDiff = _PostProcessingDiff | DefaultPostProcessing;\n\ninterface _PostProcessingRolling {\n  operation: 'rolling';\n  options: {\n    rolling_type: RollingType;\n    window: number;\n    min_periods: number;\n    columns: string[];\n  };\n}\nexport type PostProcessingRolling =\n  | _PostProcessingRolling\n  | DefaultPostProcessing;\n\ninterface _PostProcessingCum {\n  operation: 'cum';\n  options: {\n    columns: string[];\n    operator: NumpyFunction;\n  };\n}\nexport type PostProcessingCum = _PostProcessingCum | DefaultPostProcessing;\n\nexport interface _PostProcessingCompare {\n  operation: 'compare';\n  options: {\n    source_columns: string[];\n    compare_columns: string[];\n    compare_type: Omit<ComparisonType, ComparisonType.Values>;\n    drop_original_columns: boolean;\n  };\n}\nexport type PostProcessingCompare =\n  | _PostProcessingCompare\n  | DefaultPostProcessing;\n\ninterface _PostProcessingSort {\n  operation: 'sort';\n  options: {\n    is_sort_index?: boolean;\n    by?: string[] | string;\n    ascending?: boolean[] | boolean;\n  };\n}\nexport type PostProcessingSort = _PostProcessingSort | DefaultPostProcessing;\n\ninterface _PostProcessingResample {\n  operation: 'resample';\n  options: {\n    method: string;\n    rule: string;\n    fill_value?: number | null;\n  };\n}\nexport type PostProcessingResample =\n  | _PostProcessingResample\n  | DefaultPostProcessing;\n\ninterface _PostProcessingRename {\n  operation: 'rename';\n  options: {\n    columns: Record<string, string | null>;\n    inplace?: boolean;\n    level?: number | string;\n  };\n}\nexport type PostProcessingRename =\n  | _PostProcessingRename\n  | DefaultPostProcessing;\n\ninterface _PostProcessingFlatten {\n  operation: 'flatten';\n  options?: {\n    reset_index?: boolean;\n    drop_levels?: number[] | string[];\n  };\n}\nexport type PostProcessingFlatten =\n  | _PostProcessingFlatten\n  | DefaultPostProcessing;\n\n/**\n * Parameters for chart data postprocessing.\n * See superset/utils/pandas_processing.py.\n */\nexport type PostProcessingRule =\n  | PostProcessingAggregation\n  | PostProcessingBoxplot\n  | PostProcessingContribution\n  | PostProcessingPivot\n  | PostProcessingProphet\n  | PostProcessingDiff\n  | PostProcessingRolling\n  | PostProcessingCum\n  | PostProcessingCompare\n  | PostProcessingSort\n  | PostProcessingResample\n  | PostProcessingRename\n  | PostProcessingFlatten;\n\nexport function isPostProcessingAggregation(\n  rule?: PostProcessingRule,\n): rule is PostProcessingAggregation {\n  return rule?.operation === 'aggregation';\n}\n\nexport function isPostProcessingBoxplot(\n  rule?: PostProcessingRule,\n): rule is PostProcessingBoxplot {\n  return rule?.operation === 'boxplot';\n}\n\nexport function isPostProcessingContribution(\n  rule?: PostProcessingRule,\n): rule is PostProcessingContribution {\n  return rule?.operation === 'contribution';\n}\n\nexport function isPostProcessingPivot(\n  rule?: PostProcessingRule,\n): rule is PostProcessingPivot {\n  return rule?.operation === 'pivot';\n}\n\nexport function isPostProcessingProphet(\n  rule?: PostProcessingRule,\n): rule is PostProcessingProphet {\n  return rule?.operation === 'prophet';\n}\n\nexport function isPostProcessingDiff(\n  rule?: PostProcessingRule,\n): rule is PostProcessingDiff {\n  return rule?.operation === 'diff';\n}\n\nexport function isPostProcessingRolling(\n  rule?: PostProcessingRule,\n): rule is PostProcessingRolling {\n  return rule?.operation === 'rolling';\n}\n\nexport function isPostProcessingCum(\n  rule?: PostProcessingRule,\n): rule is PostProcessingCum {\n  return rule?.operation === 'cum';\n}\n\nexport function isPostProcessingCompare(\n  rule?: PostProcessingRule,\n): rule is PostProcessingCompare {\n  return rule?.operation === 'compare';\n}\n\nexport function isPostProcessingSort(\n  rule?: PostProcessingRule,\n): rule is PostProcessingSort {\n  return rule?.operation === 'sort';\n}\n\nexport function isPostProcessingResample(\n  rule?: PostProcessingRule,\n): rule is PostProcessingResample {\n  return rule?.operation === 'resample';\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { QueryObject } from './Query';\n\nexport type TimeRange = {\n  /** Time range of the query [from, to] */\n  time_range?: string;\n  since?: string;\n  until?: string;\n};\n\nexport type TimeColumnConfigKey =\n  | '__time_col'\n  | '__time_grain'\n  | '__time_range'\n  | '__granularity';\n\nexport type AppliedTimeExtras = Partial<\n  Record<TimeColumnConfigKey, keyof QueryObject>\n>;\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Translations for a language in the format of { key: [singular, plural, ...]}.\n */\nexport type Translations = {\n  [key: string]: ReadonlyArray<string>;\n};\n\nexport interface DomainConfig {\n  domain: string;\n  lang: string;\n  // eslint-disable-next-line camelcase\n  plural_forms: string;\n}\n\nexport type DomainData = { '': DomainConfig } & {\n  [key: string]: ReadonlyArray<string> | DomainConfig;\n};\n\nexport interface JedOptions {\n  domain: string;\n  // eslint-disable-next-line camelcase\n  locale_data: {\n    [domain: string]: DomainData;\n  };\n}\n\nexport interface Jed {\n  translate(input: string): Jed;\n\n  ifPlural(value: number, plural: string): Jed;\n\n  fetch(...args: unknown[]): string;\n\n  options: JedOptions;\n}\n\nexport default {};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Jed as BaseJed, JedOptions, DomainData, Translations } from './jed';\n\nexport * from './jed';\nexport { default as __hack_reexport_jed } from './jed';\n\n/**\n * Superset supported languages.\n */\nexport type Locale =\n  | 'de'\n  | 'en'\n  | 'es'\n  | 'fr'\n  | 'it'\n  | 'ja'\n  | 'ko'\n  | 'pt'\n  | 'pt_BR'\n  | 'ru'\n  | 'zh'; // supported locales in Superset\n\n/**\n * Language pack provided to `jed`.\n */\nexport type LanguagePack = JedOptions & {\n  // eslint-disable-next-line camelcase\n  locale_data: {\n    superset: DomainData & {\n      '': {\n        domain: 'superset';\n        lang: Locale;\n        // eslint-disable-next-line camelcase\n        plural_forms: string;\n      };\n    };\n  };\n};\n\nexport interface Jed extends BaseJed {\n  options: LanguagePack;\n}\n\n/**\n * Config options for Translator class.\n */\nexport interface TranslatorConfig {\n  languagePack?: LanguagePack;\n}\n\n/**\n * Key-value mapping of translation key and the translations.\n */\nexport type LocaleData = Partial<Record<Locale, Translations>>;\n\nexport default {};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport SupersetClientClass from './SupersetClientClass';\n\nexport type Body = RequestInit['body'];\nexport type Cache = RequestInit['cache'];\nexport type Credentials = RequestInit['credentials'];\nexport type Endpoint = string;\nexport type FetchRetryOptions = {\n  retries?: number;\n  retryDelay?:\n    | number\n    | ((attempt: number, error: Error, response: Response) => number);\n  retryOn?:\n    | number[]\n    | ((attempt: number, error: Error, response: Response) => boolean);\n};\nexport type Headers = { [k: string]: string };\nexport type Host = string;\n\nexport type JsonPrimitive = string | number | boolean | null;\n/**\n * More strict JSON value types. If this fails to satisfy TypeScript when using\n * as function arguments, use `JsonObject` instead. `StrictJsonObject` helps make\n * sure all values are plain objects, but it does not accept specific types when\n * used as function arguments.\n * (Ref: https://github.com/microsoft/TypeScript/issues/15300).\n */\nexport type StrictJsonValue =\n  | JsonPrimitive\n  | StrictJsonObject\n  | StrictJsonArray;\nexport type StrictJsonArray = StrictJsonValue[];\n/**\n * More strict JSON objects that makes sure all values are plain objects.\n * If this fails to satisfy TypeScript when using as function arguments,\n * use `JsonObject` instead.\n * (Ref: https://github.com/microsoft/TypeScript/issues/15300).\n */\nexport type StrictJsonObject = { [member: string]: StrictJsonValue };\n\nexport type JsonValue = JsonPrimitive | JsonObject | JsonArray;\nexport type JsonArray = JsonValue[];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type JsonObject = { [member: string]: any };\n\n/**\n * Request payload, can be use in GET query string, Post form or POST JSON.\n * If string, will parse with JSON.parse.\n */\nexport type Payload = JsonObject | string | null;\n\nexport type Method = RequestInit['method'];\nexport type Mode = RequestInit['mode'];\nexport type Redirect = RequestInit['redirect'];\nexport type ClientTimeout = number | undefined;\nexport type ParseMethod =\n  | 'json'\n  | 'json-bigint'\n  | 'text'\n  | 'raw'\n  | null\n  | undefined;\nexport type Signal = RequestInit['signal'];\nexport type Stringify = boolean;\nexport type Url = string;\n\nexport interface RequestBase {\n  body?: Body;\n  credentials?: Credentials;\n  fetchRetryOptions?: FetchRetryOptions;\n  headers?: Headers;\n  host?: Host;\n  ignoreUnauthorized?: boolean;\n  mode?: Mode;\n  method?: Method;\n  jsonPayload?: Payload;\n  postPayload?: Payload | FormData;\n  searchParams?: Payload | URLSearchParams;\n  signal?: Signal;\n  stringify?: Stringify;\n  timeout?: ClientTimeout;\n}\n\nexport interface CallApi extends RequestBase {\n  url: Url;\n  cache?: Cache;\n  redirect?: Redirect;\n}\n\nexport interface RequestWithEndpoint extends RequestBase {\n  endpoint: Endpoint;\n  url?: Url;\n}\n\nexport interface RequestWithUrl extends RequestBase {\n  url: Url;\n  endpoint?: Endpoint;\n}\n\n// this make sure at least one of `url` or `endpoint` is set\nexport type RequestConfig = RequestWithEndpoint | RequestWithUrl;\n\nexport interface JsonResponse {\n  response: Response;\n  json: JsonObject;\n}\n\nexport interface TextResponse {\n  response: Response;\n  text: string;\n}\n\nexport type CsrfToken = string;\nexport type CsrfPromise = Promise<string | undefined>;\nexport type Protocol = 'http:' | 'https:';\n\nexport interface ClientConfig {\n  baseUrl?: string;\n  host?: Host;\n  protocol?: Protocol;\n  credentials?: Credentials;\n  csrfToken?: CsrfToken;\n  guestToken?: string;\n  guestTokenHeaderName?: string;\n  fetchRetryOptions?: FetchRetryOptions;\n  headers?: Headers;\n  mode?: Mode;\n  timeout?: ClientTimeout;\n  unauthorizedHandler?: () => void;\n}\n\nexport interface SupersetClientInterface\n  extends Pick<\n    SupersetClientClass,\n    | 'delete'\n    | 'get'\n    | 'post'\n    | 'postForm'\n    | 'put'\n    | 'request'\n    | 'init'\n    | 'isAuthenticated'\n    | 'reAuthenticate'\n    | 'getGuestToken'\n  > {\n  configure: (config?: ClientConfig) => SupersetClientInterface;\n  reset: () => void;\n}\n\nexport type SupersetClientResponse = Response | JsonResponse | TextResponse;\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SupersetClient } from '../../../connection';\nimport { BaseParams } from '../types';\nimport { QueryFormData } from '../../types/QueryFormData';\n\nexport interface Params extends BaseParams {\n  sliceId: number;\n  overrideFormData?: Partial<QueryFormData>;\n}\n\nexport default function getFormData({\n  client = SupersetClient,\n  sliceId,\n  overrideFormData,\n  requestConfig,\n}: Params) {\n  const promise = client\n    .get({\n      endpoint: `/api/v1/form_data/?slice_id=${sliceId}`,\n      ...requestConfig,\n    })\n    .then(({ json }) => json as QueryFormData);\n\n  return overrideFormData\n    ? promise.then(formData => ({ ...formData, ...overrideFormData }))\n    : promise;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { SupersetClient } from '../../../connection';\nimport { Datasource } from '../../types/Datasource';\nimport { BaseParams } from '../types';\n\nexport interface Params extends BaseParams {\n  datasourceKey: string;\n}\n\nexport default function getDatasourceMetadata({\n  client = SupersetClient,\n  datasourceKey,\n  requestConfig,\n}: Params) {\n  return client\n    .get({\n      endpoint: `/superset/fetch_datasource_metadata?datasourceKey=${datasourceKey}`,\n      ...requestConfig,\n    })\n    .then(response => response.json as Datasource);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ChartDataResponseResult } from '../../types';\n\nexport interface LegacyChartDataResponse\n  extends Omit<ChartDataResponseResult, 'data'> {\n  data: Record<string, unknown>[] | Record<string, unknown>;\n}\n\nexport default {};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport makeApi from './makeApi';\nimport { ChartDataResponse, QueryContext } from '../../types';\n\nexport const getChartData = makeApi<QueryContext, ChartDataResponse>({\n  method: 'POST',\n  endpoint: '/api/v1/chart/data',\n});\n\n/**\n * All v1 API\n */\nexport default {\n  getChartData,\n};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { format as d3Format } from 'd3-format';\nimport NumberFormatter from '../NumberFormatter';\n\nexport default function createSiAtMostNDigitFormatter(\n  config: {\n    description?: string;\n    n?: number;\n    id?: string;\n    label?: string;\n  } = {},\n) {\n  const { description, n = 3, id, label } = config;\n  const siFormatter = d3Format(`.${n}s`);\n\n  return new NumberFormatter({\n    description,\n    formatFunc: value => {\n      const si = siFormatter(value);\n\n      /* Removing trailing `.00` if any */\n      return si.slice(-1) < 'A' ? parseFloat(si).toString() : si;\n    },\n    id: id ?? `si_at_most_${n}_digit`,\n    label: label ?? `SI with at most ${n} significant digits`,\n  });\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { TS_REGEX } from './normalizeTimestamp';\n\nexport default function normalizeTimestamp(value: string): string {\n  const match = value.match(TS_REGEX);\n  if (match) {\n    return `${match[1]}T${match[2]}`;\n  }\n  return value;\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Margin } from './types';\n\nfunction mergeOneSide(\n  operation: (a: number, b: number) => number,\n  a = 0,\n  b = 0,\n) {\n  if (Number.isNaN(a) || a === null) return b;\n  if (Number.isNaN(b) || b === null) return a;\n\n  return operation(a, b);\n}\n\nexport default function mergeMargin(\n  margin1: Partial<Margin> = {},\n  margin2: Partial<Margin> = {},\n  mode: 'expand' | 'shrink' = 'expand',\n) {\n  const { top, left, bottom, right } = margin1;\n  const operation = mode === 'expand' ? Math.max : Math.min;\n\n  return {\n    bottom: mergeOneSide(operation, bottom, margin2.bottom),\n    left: mergeOneSide(operation, left, margin2.left),\n    right: mergeOneSide(operation, right, margin2.right),\n    top: mergeOneSide(operation, top, margin2.top),\n  };\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nexport interface TextStyle {\n  font?: string;\n  fontFamily?: string;\n  fontSize?: string | number;\n  fontStyle?: string;\n  fontWeight?: string | number;\n  letterSpacing?: string | number;\n}\n\nexport interface Margin {\n  top: number;\n  left: number;\n  bottom: number;\n  right: number;\n}\n\nexport interface Dimension {\n  width: number;\n  height: number;\n}\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { t } from '../translation';\n\nexport default function validateInteger(v: unknown) {\n  if (\n    (typeof v === 'string' &&\n      v.trim().length > 0 &&\n      Number.isInteger(Number(v.trim()))) ||\n    (typeof v === 'number' && Number.isInteger(v))\n  ) {\n    return false;\n  }\n\n  return t('is expected to be an integer');\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  isDefined,\n  SupersetClient,\n  SupersetClientInterface,\n  RequestConfig,\n  SupersetClientClass,\n  QueryFormData,\n  Datasource,\n} from '../..';\nimport getChartBuildQueryRegistry from '../registries/ChartBuildQueryRegistrySingleton';\nimport getChartMetadataRegistry from '../registries/ChartMetadataRegistrySingleton';\nimport { QueryData } from '../types/QueryResponse';\nimport { AnnotationLayerMetadata } from '../types/Annotation';\nimport { PlainObject } from '../types/Base';\n\n// This expands to Partial<All> & (union of all possible single-property types)\ntype AtLeastOne<All, Each = { [K in keyof All]: Pick<All, K> }> = Partial<All> &\n  Each[keyof Each];\n\nexport type SliceIdAndOrFormData = AtLeastOne<{\n  sliceId: number;\n  formData: Partial<QueryFormData>;\n}>;\n\ninterface AnnotationData {\n  [key: string]: PlainObject;\n}\n\nexport interface ChartData {\n  annotationData: AnnotationData;\n  datasource: PlainObject;\n  formData: QueryFormData;\n  queriesData: QueryData[];\n}\n\nexport default class ChartClient {\n  readonly client: SupersetClientInterface | SupersetClientClass;\n\n  constructor(\n    config: {\n      client?: SupersetClientInterface | SupersetClientClass;\n    } = {},\n  ) {\n    const { client = SupersetClient } = config;\n    this.client = client;\n  }\n\n  loadFormData(\n    input: SliceIdAndOrFormData,\n    options?: Partial<RequestConfig>,\n  ): Promise<QueryFormData> {\n    /* If sliceId is provided, use it to fetch stored formData from API */\n    if ('sliceId' in input) {\n      const promise = this.client\n        .get({\n          endpoint: `/api/v1/form_data/?slice_id=${input.sliceId}`,\n          ...options,\n        } as RequestConfig)\n        .then(response => response.json as QueryFormData);\n\n      /*\n       * If formData is also specified, override API result\n       * with user-specified formData\n       */\n      return promise.then((dbFormData: QueryFormData) => ({\n        ...dbFormData,\n        ...input.formData,\n      }));\n    }\n\n    /* If sliceId is not provided, returned formData wrapped in a Promise */\n    return input.formData\n      ? Promise.resolve(input.formData as QueryFormData)\n      : Promise.reject(\n          new Error('At least one of sliceId or formData must be specified'),\n        );\n  }\n\n  async loadQueryData(\n    formData: QueryFormData,\n    options?: Partial<RequestConfig>,\n  ): Promise<QueryData[]> {\n    const { viz_type: visType } = formData;\n    const metaDataRegistry = getChartMetadataRegistry();\n    const buildQueryRegistry = getChartBuildQueryRegistry();\n\n    if (metaDataRegistry.has(visType)) {\n      const { useLegacyApi } = metaDataRegistry.get(visType)!;\n      const buildQuery =\n        (await buildQueryRegistry.get(visType)) ?? (() => formData);\n      const requestConfig: RequestConfig = useLegacyApi\n        ? {\n            endpoint: '/superset/explore_json/',\n            postPayload: {\n              form_data: buildQuery(formData),\n            },\n            ...options,\n          }\n        : {\n            endpoint: '/api/v1/chart/data',\n            jsonPayload: {\n              query_context: buildQuery(formData),\n            },\n            ...options,\n          };\n\n      return this.client\n        .post(requestConfig)\n        .then(response =>\n          Array.isArray(response.json) ? response.json : [response.json],\n        );\n    }\n\n    return Promise.reject(new Error(`Unknown chart type: ${visType}`));\n  }\n\n  loadDatasource(\n    datasourceKey: string,\n    options?: Partial<RequestConfig>,\n  ): Promise<Datasource> {\n    return this.client\n      .get({\n        endpoint: `/superset/fetch_datasource_metadata?datasourceKey=${datasourceKey}`,\n        ...options,\n      } as RequestConfig)\n      .then(response => response.json as Datasource);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  loadAnnotation(\n    annotationLayer: AnnotationLayerMetadata,\n  ): Promise<AnnotationData> {\n    /* When annotation does not require query */\n    if (!isDefined(annotationLayer.sourceType)) {\n      return Promise.resolve({} as AnnotationData);\n    }\n\n    // TODO: Implement\n    return Promise.reject(new Error('This feature is not implemented yet.'));\n  }\n\n  loadAnnotations(\n    annotationLayers?: AnnotationLayerMetadata[],\n  ): Promise<AnnotationData> {\n    if (Array.isArray(annotationLayers) && annotationLayers.length > 0) {\n      return Promise.all(\n        annotationLayers.map(layer => this.loadAnnotation(layer)),\n      ).then(results =>\n        annotationLayers.reduce((prev, layer, i) => {\n          const output: AnnotationData = prev;\n          output[layer.name] = results[i];\n\n          return output;\n        }, {}),\n      );\n    }\n\n    return Promise.resolve({});\n  }\n\n  loadChartData(input: SliceIdAndOrFormData): Promise<ChartData> {\n    return this.loadFormData(input).then(\n      (\n        formData: QueryFormData & {\n          // eslint-disable-next-line camelcase\n          annotation_layers?: AnnotationLayerMetadata[];\n        },\n      ) =>\n        Promise.all([\n          this.loadAnnotations(formData.annotation_layers),\n          this.loadDatasource(formData.datasource),\n          this.loadQueryData(formData),\n        ]).then(([annotationData, datasource, queriesData]) => ({\n          annotationData,\n          datasource,\n          formData,\n          queriesData,\n        })),\n    );\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/* eslint react/sort-comp: 'off' */\nimport React, { ReactNode } from 'react';\nimport {\n  SupersetClientInterface,\n  RequestConfig,\n  QueryFormData,\n  Datasource,\n} from '../..';\nimport ChartClient, { SliceIdAndOrFormData } from '../clients/ChartClient';\nimport { QueryData } from '../types/QueryResponse';\n\ninterface Payload {\n  formData: Partial<QueryFormData>;\n  queriesData: QueryData[];\n  datasource?: Datasource;\n}\n\nexport interface ProvidedProps {\n  payload?: Payload;\n  error?: Error;\n  loading?: boolean;\n}\n\nexport type ChartDataProviderProps =\n  /** User can pass either one or both of sliceId or formData */\n  SliceIdAndOrFormData & {\n    /** Child function called with ProvidedProps */\n    children: (provided: ProvidedProps) => ReactNode;\n    /** Superset client which is used to fetch data. It should already be configured and initialized. */\n    client?: SupersetClientInterface;\n    /** Will fetch and include datasource metadata for SliceIdAndOrFormData in the payload. */\n    loadDatasource?: boolean;\n    /** Callback when an error occurs. Enables wrapping the Provider in an ErrorBoundary. */\n    onError?: (error: ProvidedProps['error']) => void;\n    /** Callback when data is loaded. */\n    onLoaded?: (payload: ProvidedProps['payload']) => void;\n    /** Hook to override the formData request config. */\n    formDataRequestOptions?: Partial<RequestConfig>;\n    /** Hook to override the datasource request config. */\n    datasourceRequestOptions?: Partial<RequestConfig>;\n    /** Hook to override the queriesData request config. */\n    queryRequestOptions?: Partial<RequestConfig>;\n  };\n\nexport type ChartDataProviderState = {\n  status: 'uninitialized' | 'loading' | 'error' | 'loaded';\n  payload?: ProvidedProps['payload'];\n  error?: ProvidedProps['error'];\n};\n\nclass ChartDataProvider extends React.PureComponent<\n  ChartDataProviderProps,\n  ChartDataProviderState\n> {\n  readonly chartClient: ChartClient;\n\n  constructor(props: ChartDataProviderProps) {\n    super(props);\n    this.state = { status: 'uninitialized' };\n    this.chartClient = new ChartClient({ client: props.client });\n  }\n\n  componentDidMount() {\n    this.handleFetchData();\n  }\n\n  componentDidUpdate(prevProps: ChartDataProviderProps) {\n    const { formData, sliceId } = this.props;\n    if (formData !== prevProps.formData || sliceId !== prevProps.sliceId) {\n      this.handleFetchData();\n    }\n  }\n\n  private extractSliceIdAndFormData() {\n    const { formData, sliceId } = this.props;\n    return formData ? { formData } : { sliceId: sliceId as number };\n  }\n\n  private handleFetchData = () => {\n    const {\n      loadDatasource,\n      formDataRequestOptions,\n      datasourceRequestOptions,\n      queryRequestOptions,\n    } = this.props;\n\n    this.setState({ status: 'loading' }, () => {\n      try {\n        this.chartClient\n          .loadFormData(\n            this.extractSliceIdAndFormData(),\n            formDataRequestOptions,\n          )\n          .then(formData =>\n            Promise.all([\n              loadDatasource\n                ? this.chartClient.loadDatasource(\n                    formData.datasource,\n                    datasourceRequestOptions,\n                  )\n                : Promise.resolve(undefined),\n              this.chartClient.loadQueryData(formData, queryRequestOptions),\n            ]).then(\n              ([datasource, queriesData]) =>\n                // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n                ({\n                  datasource,\n                  formData,\n                  queriesData,\n                }) as Payload,\n            ),\n          )\n          .then(this.handleReceiveData)\n          .catch(this.handleError);\n      } catch (error) {\n        this.handleError(error as Error);\n      }\n    });\n  };\n\n  private handleReceiveData = (payload?: Payload) => {\n    const { onLoaded } = this.props;\n    if (onLoaded) onLoaded(payload);\n    this.setState({ payload, status: 'loaded' });\n  };\n\n  private handleError = (error: ProvidedProps['error']) => {\n    const { onError } = this.props;\n    if (onError) onError(error);\n    this.setState({ error, status: 'error' });\n  };\n\n  render() {\n    const { children } = this.props;\n    const { status, payload, error } = this.state;\n\n    switch (status) {\n      case 'loading':\n        return children({ loading: true });\n      case 'loaded':\n        return children({ payload });\n      case 'error':\n        return children({ error });\n      case 'uninitialized':\n      default:\n        return null;\n    }\n  }\n}\n\nexport default ChartDataProvider;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  QueryFormData,\n  QueryContext,\n  SetDataMaskHook,\n  JsonObject,\n} from '../..';\nimport ChartProps from '../models/ChartProps';\nimport { PlainObject } from './Base';\n\nexport type PlainProps = PlainObject;\n\ntype TransformFunction<Input = PlainProps, Output = PlainProps> = (\n  x: Input,\n) => Output;\n\nexport type PreTransformProps = TransformFunction<ChartProps, ChartProps>;\nexport type TransformProps<Props extends ChartProps = ChartProps> =\n  TransformFunction<Props>;\nexport type PostTransformProps = TransformFunction;\n\nexport type BuildQueryFunction<T extends QueryFormData> = (\n  formData: T,\n  options?: {\n    extras?: {\n      cachedChanges?: any;\n    };\n    ownState?: JsonObject;\n    hooks?: {\n      setDataMask: SetDataMaskHook;\n      setCachedChanges: (newChanges: any) => void;\n    };\n  },\n) => QueryContext;\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Types for query response\n */\nimport {\n  DataRecordValue,\n  DataRecord,\n  ChartDataResponseResult,\n} from '../../types';\nimport { PlainObject } from './Base';\n\nexport interface TimeseriesDataRecord extends DataRecord {\n  __timestamp: number | string | Date | null;\n}\n\n// data record value filters from FilterBox\nexport interface DataRecordFilters {\n  [key: string]: DataRecordValue[];\n}\n\n/**\n * Legacy queried data for charts. List of arbitrary dictionaries generated\n * by `viz.py`.\n * TODO: clean this up when all charts have been migrated to v1 API.\n */\nexport type LegacyQueryData = PlainObject;\n\n/**\n * Ambiguous query data type. Reserved for the generic QueryFormData.\n * Don't use this for a specific chart (since you know which API it uses already).\n */\nexport type QueryData = LegacyQueryData | ChartDataResponseResult;\n\nexport default {};\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { PureComponent } from 'react';\nimport { isDefined } from '../utils';\n\nfunction checkNumber(input: unknown): input is number {\n  return isDefined(input) && typeof input === 'number';\n}\n\ntype Props = {\n  contentWidth?: number;\n  contentHeight?: number;\n  height: number;\n  renderContent: ({\n    height,\n    width,\n  }: {\n    height: number;\n    width: number;\n  }) => React.ReactNode;\n  width: number;\n};\n\nexport default class ChartFrame extends PureComponent<Props, {}> {\n  static defaultProps = {\n    renderContent() {},\n  };\n\n  render() {\n    const { contentWidth, contentHeight, width, height, renderContent } =\n      this.props;\n\n    const overflowX = checkNumber(contentWidth) && contentWidth > width;\n    const overflowY = checkNumber(contentHeight) && contentHeight > height;\n\n    if (overflowX || overflowY) {\n      return (\n        <div\n          style={{\n            height,\n            overflowX: overflowX ? 'auto' : 'hidden',\n            overflowY: overflowY ? 'auto' : 'hidden',\n            width,\n          }}\n        >\n          {renderContent({\n            height: Math.max(contentHeight ?? 0, height),\n            width: Math.max(contentWidth ?? 0, width),\n          })}\n        </div>\n      );\n    }\n\n    return renderContent({ height, width });\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { CSSProperties, ReactNode, PureComponent } from 'react';\nimport { ParentSize } from '@vx/responsive';\n\nconst defaultProps = {\n  className: '',\n  height: 'auto' as number | string,\n  position: 'top',\n  width: 'auto' as number | string,\n};\n\ntype Props = {\n  className: string;\n  debounceTime?: number;\n  width: number | string;\n  height: number | string;\n  legendJustifyContent?: 'center' | 'flex-start' | 'flex-end';\n  position: 'top' | 'left' | 'bottom' | 'right';\n  renderChart: (dim: { width: number; height: number }) => ReactNode;\n  renderLegend?: (params: { direction: string }) => ReactNode;\n} & Readonly<typeof defaultProps>;\n\nconst LEGEND_STYLE_BASE: CSSProperties = {\n  display: 'flex',\n  flexGrow: 0,\n  flexShrink: 0,\n  order: -1,\n};\n\nconst CHART_STYLE_BASE: CSSProperties = {\n  flexBasis: 'auto',\n  flexGrow: 1,\n  flexShrink: 1,\n  position: 'relative',\n};\n\nclass WithLegend extends PureComponent<Props, {}> {\n  static defaultProps = defaultProps;\n\n  getContainerDirection(): CSSProperties['flexDirection'] {\n    const { position } = this.props;\n\n    if (position === 'left') {\n      return 'row';\n    }\n    if (position === 'right') {\n      return 'row-reverse';\n    }\n    if (position === 'bottom') {\n      return 'column-reverse';\n    }\n\n    return 'column';\n  }\n\n  getLegendJustifyContent() {\n    const { legendJustifyContent, position } = this.props;\n    if (legendJustifyContent) {\n      return legendJustifyContent;\n    }\n\n    if (position === 'left' || position === 'right') {\n      return 'flex-start';\n    }\n\n    return 'flex-end';\n  }\n\n  render() {\n    const {\n      className,\n      debounceTime,\n      width,\n      height,\n      position,\n      renderChart,\n      renderLegend,\n    } = this.props;\n\n    const isHorizontal = position === 'left' || position === 'right';\n\n    const style: CSSProperties = {\n      display: 'flex',\n      flexDirection: this.getContainerDirection(),\n      height,\n      width,\n    };\n\n    const chartStyle: CSSProperties = { ...CHART_STYLE_BASE };\n    if (isHorizontal) {\n      chartStyle.width = 0;\n    } else {\n      chartStyle.height = 0;\n    }\n\n    const legendDirection = isHorizontal ? 'column' : 'row';\n    const legendStyle: CSSProperties = {\n      ...LEGEND_STYLE_BASE,\n      flexDirection: legendDirection,\n      justifyContent: this.getLegendJustifyContent(),\n    };\n\n    return (\n      <div className={`with-legend ${className}`} style={style}>\n        {renderLegend && (\n          <div className=\"legend-container\" style={legendStyle}>\n            {renderLegend({\n              // Pass flexDirection for @vx/legend to arrange legend items\n              direction: legendDirection,\n            })}\n          </div>\n        )}\n        <div className=\"main-container\" style={chartStyle}>\n          <ParentSize debounceTime={debounceTime}>\n            {(parent: { width: number; height: number }) =>\n              parent.width > 0 && parent.height > 0\n                ? // Only render when necessary\n                  renderChart(parent)\n                : null\n            }\n          </ParentSize>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default WithLegend;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { PureComponent } from 'react';\n\nconst defaultProps = {\n  className: '',\n};\n\ntype Props = {\n  className?: string;\n  children: React.ReactNode;\n} & Readonly<typeof defaultProps>;\n\nconst CONTAINER_STYLE = { padding: 8 };\n\nclass TooltipFrame extends PureComponent<Props, {}> {\n  static defaultProps = defaultProps;\n\n  render() {\n    const { className, children } = this.props;\n\n    return (\n      <div className={className} style={CONTAINER_STYLE}>\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default TooltipFrame;\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { CSSProperties, PureComponent, ReactNode } from 'react';\n\ninterface TooltipRowData {\n  key: string | number;\n  keyColumn?: ReactNode;\n  keyStyle?: CSSProperties;\n  valueColumn: ReactNode;\n  valueStyle?: CSSProperties;\n}\n\nconst defaultProps = {\n  className: '',\n  data: [] as TooltipRowData[],\n};\n\ntype Props = {\n  className?: string;\n  data: TooltipRowData[];\n} & Readonly<typeof defaultProps>;\n\nconst VALUE_CELL_STYLE: CSSProperties = { paddingLeft: 8, textAlign: 'right' };\n\nexport default class TooltipTable extends PureComponent<Props, {}> {\n  static defaultProps = defaultProps;\n\n  render() {\n    const { className, data } = this.props;\n\n    return (\n      <table className={className}>\n        <tbody>\n          {data.map(({ key, keyColumn, keyStyle, valueColumn, valueStyle }) => (\n            <tr key={key}>\n              <td style={keyStyle}>{keyColumn ?? key}</td>\n              <td\n                style={\n                  valueStyle\n                    ? { ...VALUE_CELL_STYLE, ...valueStyle }\n                    : VALUE_CELL_STYLE\n                }\n              >\n                {valueColumn}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    );\n  }\n}\n","/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { utcFormat, timeFormat } from 'd3-time-format';\nimport { utcUtils, localTimeUtils } from '../utils/d3Time';\nimport TimeFormatter from '../TimeFormatter';\n\n/*\n * A formatter that examines all the values, and uses the finest temporal grain.\n */\nexport default function finestTemporalGrain(\n  values: any[],\n  useLocalTime = false,\n) {\n  const format = useLocalTime ? timeFormat : utcFormat;\n\n  const formatMillisecond = format('%Y-%m-%d %H:%M:%S.%L');\n  const formatSecond = format('%Y-%m-%d %H:%M:%S');\n  const formatMinute = format('%Y-%m-%d %H:%M');\n  const formatHour = format('%Y-%m-%d %H:%M');\n  const formatDay = format('%Y-%m-%d');\n  const formatMonth = format('%Y-%m-%d');\n  const formatYear = format('%Y');\n\n  const {\n    hasMillisecond,\n    hasSecond,\n    hasMinute,\n    hasHour,\n    isNotFirstDayOfMonth,\n    isNotFirstMonth,\n  } = useLocalTime ? localTimeUtils : utcUtils;\n\n  let formatFunc = formatYear;\n  values.forEach((value: any) => {\n    if (formatFunc === formatYear && isNotFirstMonth(value)) {\n      formatFunc = formatMonth;\n    }\n    if (formatFunc === formatMonth && isNotFirstDayOfMonth(value)) {\n      formatFunc = formatDay;\n    }\n    if (formatFunc === formatDay && hasHour(value)) {\n      formatFunc = formatHour;\n    }\n    if (formatFunc === formatHour && hasMinute(value)) {\n      formatFunc = formatMinute;\n    }\n    if (formatFunc === formatMinute && hasSecond(value)) {\n      formatFunc = formatSecond;\n    }\n    if (formatFunc === formatSecond && hasMillisecond(value)) {\n      formatFunc = formatMillisecond;\n    }\n  });\n\n  return new TimeFormatter({\n    description:\n      'Use the finest grain in an array of dates to format all dates in the array',\n    formatFunc,\n    id: 'finest_temporal_grain',\n    label: 'Format temporal columns with the finest grain',\n    useLocalTime,\n  });\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport const getSelectedText = () => window.getSelection()?.toString();\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { FilterXSS, getDefaultWhiteList } from 'xss';\n\nconst xssFilter = new FilterXSS({\n  whiteList: {\n    ...getDefaultWhiteList(),\n    span: ['style', 'class', 'title'],\n    div: ['style', 'class'],\n    a: ['style', 'class', 'href', 'title', 'target'],\n    img: ['style', 'class', 'src', 'alt', 'title', 'width', 'height'],\n    video: [\n      'autoplay',\n      'controls',\n      'loop',\n      'preload',\n      'src',\n      'height',\n      'width',\n      'muted',\n    ],\n  },\n  stripIgnoreTag: true,\n  css: false,\n});\n\nexport function sanitizeHtml(htmlString: string) {\n  return xssFilter.process(htmlString);\n}\n\nexport function isProbablyHTML(text: string) {\n  return Array.from(\n    new DOMParser().parseFromString(text, 'text/html').body.childNodes,\n  ).some(({ nodeType }) => nodeType === 1);\n}\n\nexport function sanitizeHtmlIfNeeded(htmlString: string) {\n  return isProbablyHTML(htmlString) ? sanitizeHtml(htmlString) : htmlString;\n}\n\nexport function safeHtmlSpan(possiblyHtmlString: string) {\n  const isHtml = isProbablyHTML(possiblyHtmlString);\n  if (isHtml) {\n    return (\n      <span\n        className=\"safe-html-wrapper\"\n        dangerouslySetInnerHTML={{ __html: sanitizeHtml(possiblyHtmlString) }}\n      />\n    );\n  }\n  return possiblyHtmlString;\n}\n\nexport function removeHTMLTags(str: string): string {\n  return str.replace(/<[^>]*>/g, '');\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport _seedrandom from 'seedrandom';\n\nexport function seed(seed: string) {\n  return _seedrandom(seed);\n}\n\nexport function seedRandom() {\n  return _seedrandom('superset-ui')();\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { memo } from 'react';\n\nexport const typedMemo: <T>(c: T) => T = memo;\n"],"names":["reactify","renderFn","callbacks","ReactifiedComponent","React","constructor","props","super","container","this","setContainerRef","bind","componentDidMount","execute","componentDidUpdate","componentWillUnmount","undefined","ref","render","id","className","___EmotionJSX","ReactifiedClass","displayName","propTypes","defaultProps","BRAND_COLOR","decreaseSizeUntil","startSize","computeDimension","condition","size","dimension","computeMaxFontSize","input","idealFontSize","maxWidth","maxHeight","style","rest","Error","Math","floor","fontSize","getTextDimension","dim","width","height","getMultipleTextDimensions","defaultDimension","texts","cache","Map","textNode","svgNode","set","dimensions","map","text","has","get","hiddenSvgFactory","createInContainer","textFactory","updateTextNode","getBBoxCeil","setTimeout","removeFromContainer","length","LazyFactory","factoryFn","activeNodes","document","body","entry","counter","node","append","removeChild","delete","SVG_NS","createElementNS","position","top","left","opacity","pointerEvents","DEFAULT_DIMENSION","getBBox","ceil","STYLE_FIELDS","textContent","getAttribute","setAttribute","removeProperty","filter","field","forEach","useComponentDidUpdate","effect","isMountedRef","useRef","useEffect","current","useElementOnScreen","options","containerRef","isSticky","setIsSticky","useState","callback","entries","intersectionRatio","observer","IntersectionObserver","element","observe","unobserve","useChildElementTruncation","elementsTruncated","setElementsTruncated","hasHiddenElements","setHasHiddenElements","elementRef","plusRef","useLayoutEffect","_elementRef$current","onResize","currentElement","plusRefElement","scrollWidth","clientWidth","childNodes","truncationWidth","plusSize","offsetWidth","elementsCount","hiddenElements","i","obs","ResizeObserver","parentElement","disconnect","promiseTimeout","func","delay","Promise","resolve","LRUCache","capacity","key","TypeError","tmp","value","keys","next","clear","lruCache","PandasAxis","isPostProcessingAggregation","rule","operation","isPostProcessingBoxplot","isPostProcessingContribution","isPostProcessingPivot","isPostProcessingProphet","isPostProcessingDiff","isPostProcessingRolling","isPostProcessingCum","isPostProcessingCompare","isPostProcessingSort","isPostProcessingResample","getFormData","client","SupersetClient","sliceId","overrideFormData","requestConfig","promise","endpoint","then","json","formData","getDatasourceMetadata","datasourceKey","response","getChartData","makeApi","method","createSiAtMostNDigitFormatter","config","description","n","label","siFormatter","d3Format","NumberFormatter","formatFunc","si","slice","parseFloat","toString","normalizeTimestamp","match","TS_REGEX","mergeOneSide","a","b","Number","isNaN","mergeMargin","margin1","margin2","mode","bottom","right","max","min","validateInteger","v","trim","isInteger","t","ChartClient","loadFormData","dbFormData","reject","loadQueryData","viz_type","visType","metaDataRegistry","getChartMetadataRegistry","buildQueryRegistry","getChartBuildQueryRegistry","_await$buildQueryRegi","useLegacyApi","buildQuery","postPayload","form_data","jsonPayload","query_context","post","Array","isArray","loadDatasource","loadAnnotation","annotationLayer","isDefined","sourceType","loadAnnotations","annotationLayers","all","layer","results","reduce","prev","output","name","loadChartData","annotation_layers","datasource","annotationData","queriesData","ChartDataProvider","chartClient","handleFetchData","formDataRequestOptions","datasourceRequestOptions","queryRequestOptions","setState","status","extractSliceIdAndFormData","handleReceiveData","catch","handleError","error","payload","onLoaded","onError","state","prevProps","children","loading","checkNumber","ChartFrame","PureComponent","contentWidth","contentHeight","renderContent","overflowX","overflowY","LEGEND_STYLE_BASE","display","flexGrow","flexShrink","order","CHART_STYLE_BASE","flexBasis","WithLegend","getContainerDirection","getLegendJustifyContent","legendJustifyContent","debounceTime","renderChart","renderLegend","isHorizontal","flexDirection","chartStyle","legendDirection","legendStyle","justifyContent","direction","ParentSize","parent","CONTAINER_STYLE","padding","TooltipFrame","VALUE_CELL_STYLE","paddingLeft","textAlign","TooltipTable","data","keyColumn","keyStyle","valueColumn","valueStyle","finestTemporalGrain","values","useLocalTime","format","timeFormat","utcFormat","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatMonth","formatYear","hasMillisecond","hasSecond","hasMinute","hasHour","isNotFirstDayOfMonth","isNotFirstMonth","localTimeUtils","utcUtils","TimeFormatter","getSelectedText","_window$getSelection","window","getSelection","xssFilter","FilterXSS","whiteList","getDefaultWhiteList","span","div","img","video","stripIgnoreTag","css","sanitizeHtml","htmlString","process","isProbablyHTML","from","DOMParser","parseFromString","some","nodeType","sanitizeHtmlIfNeeded","safeHtmlSpan","possiblyHtmlString","dangerouslySetInnerHTML","__html","removeHTMLTags","str","replace","seed","_seedrandom","seedRandom","typedMemo","memo"],"sourceRoot":""}