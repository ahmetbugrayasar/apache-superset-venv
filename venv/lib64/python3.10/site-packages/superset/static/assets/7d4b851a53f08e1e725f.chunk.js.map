{"version":3,"file":"7d4b851a53f08e1e725f.chunk.js","mappings":"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","sources":["webpack://superset/./src/components/DatePicker/index.tsx","webpack://superset/./src/components/Popover/Popover.tsx","webpack://superset/./src/explore/components/controls/ControlPopover/ControlPopover.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/components/CommonFrame.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/components/CalendarFrame.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/components/CustomFrame.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/components/DateFunctionTooltip.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/components/AdvancedFrame.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/components/DateLabel.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/DateFilterLabel.tsx","webpack://superset/./src/explore/components/controls/DateFilterControl/types.ts","webpack://superset/./src/explore/components/controls/DateFilterControl/utils/dateFilterUtils.ts","webpack://superset/./src/explore/components/controls/DateFilterControl/utils/constants.ts","webpack://superset/./src/explore/components/controls/DateFilterControl/utils/dateParser.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { DatePicker as AntdDatePicker } from 'antd';\nimport { styled } from '@superset-ui/core';\n\nconst AntdRangePicker = AntdDatePicker.RangePicker;\n\nexport const RangePicker = styled(AntdRangePicker)`\n  border-radius: ${({ theme }) => theme.gridUnit}px;\n`;\n\nexport const DatePicker = AntdDatePicker;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport { Popover as AntdPopover } from 'antd';\nimport type { PopoverProps as AntdPopoverProps } from 'antd/lib/popover';\n\nexport interface PopoverProps extends AntdPopoverProps {\n  forceRender?: boolean;\n}\n\nexport const Popover = (props: PopoverProps) => <AntdPopover {...props} />;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useCallback, useRef, useEffect, useState } from 'react';\n\nimport Popover, {\n  PopoverProps as BasePopoverProps,\n  TooltipPlacement,\n} from 'src/components/Popover';\n\nconst sectionContainerId = 'controlSections';\nexport const getSectionContainerElement = () =>\n  document.getElementById(sectionContainerId)?.lastElementChild as HTMLElement;\n\nconst getElementYVisibilityRatioOnContainer = (node: HTMLElement) => {\n  const containerHeight = window?.innerHeight;\n  const nodePositionInViewport = node?.getBoundingClientRect()?.top;\n  if (!containerHeight || !nodePositionInViewport) {\n    return 0;\n  }\n\n  return nodePositionInViewport / containerHeight;\n};\n\nexport type PopoverProps = BasePopoverProps & {\n  getVisibilityRatio?: typeof getElementYVisibilityRatioOnContainer;\n};\n\nconst ControlPopover: React.FC<PopoverProps> = ({\n  getPopupContainer,\n  getVisibilityRatio = getElementYVisibilityRatioOnContainer,\n  visible: visibleProp,\n  destroyTooltipOnHide = false,\n  ...props\n}) => {\n  const triggerElementRef = useRef<HTMLElement>();\n\n  const [visible, setVisible] = useState(\n    visibleProp === undefined ? props.defaultVisible : visibleProp,\n  );\n  const [placement, setPlacement] = React.useState<TooltipPlacement>('right');\n\n  const calculatePlacement = useCallback(() => {\n    const visibilityRatio = getVisibilityRatio(triggerElementRef.current!);\n    if (visibilityRatio < 0.35 && placement !== 'rightTop') {\n      setPlacement('rightTop');\n    } else if (visibilityRatio > 0.65 && placement !== 'rightBottom') {\n      setPlacement('rightBottom');\n    } else {\n      setPlacement('right');\n    }\n  }, [getVisibilityRatio]);\n\n  const changeContainerScrollStatus = useCallback(\n    visible => {\n      const element = getSectionContainerElement();\n      if (element) {\n        element.style.setProperty(\n          'overflow-y',\n          visible ? 'hidden' : 'auto',\n          'important',\n        );\n      }\n    },\n    [calculatePlacement],\n  );\n\n  const handleGetPopupContainer = useCallback(\n    (triggerNode: HTMLElement) => {\n      triggerElementRef.current = triggerNode;\n\n      return getPopupContainer?.(triggerNode) || document.body;\n    },\n    [calculatePlacement, getPopupContainer],\n  );\n\n  const handleOnVisibleChange = useCallback(\n    (visible: boolean | undefined) => {\n      if (visible === undefined) {\n        changeContainerScrollStatus(visible);\n      }\n\n      setVisible(!!visible);\n      props.onVisibleChange?.(!!visible);\n    },\n    [props, changeContainerScrollStatus],\n  );\n\n  const handleDocumentKeyDownListener = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setVisible(false);\n        props.onVisibleChange?.(false);\n      }\n    },\n    [props],\n  );\n\n  useEffect(() => {\n    if (visibleProp !== undefined) {\n      setVisible(!!visibleProp);\n    }\n  }, [visibleProp]);\n\n  useEffect(() => {\n    if (visible !== undefined) {\n      changeContainerScrollStatus(visible);\n    }\n  }, [visible, changeContainerScrollStatus]);\n\n  useEffect(() => {\n    if (visible) {\n      document.addEventListener('keydown', handleDocumentKeyDownListener);\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleDocumentKeyDownListener);\n    };\n  }, [handleDocumentKeyDownListener, visible]);\n\n  useEffect(() => {\n    if (visible) {\n      calculatePlacement();\n    }\n  }, [visible, calculatePlacement]);\n\n  return (\n    <Popover\n      {...props}\n      visible={visible}\n      arrowPointAtCenter\n      placement={placement}\n      onVisibleChange={handleOnVisibleChange}\n      getPopupContainer={handleGetPopupContainer}\n      destroyTooltipOnHide={destroyTooltipOnHide}\n    />\n  );\n};\n\nexport default ControlPopover;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { Radio } from 'src/components/Radio';\nimport {\n  COMMON_RANGE_OPTIONS,\n  COMMON_RANGE_SET,\n  DateFilterTestKey,\n} from 'src/explore/components/controls/DateFilterControl/utils';\nimport {\n  CommonRangeType,\n  FrameComponentProps,\n} from 'src/explore/components/controls/DateFilterControl/types';\n\nexport function CommonFrame(props: FrameComponentProps) {\n  let commonRange = 'Last week';\n  if (COMMON_RANGE_SET.has(props.value as CommonRangeType)) {\n    commonRange = props.value;\n  } else {\n    props.onChange(commonRange);\n  }\n\n  return (\n    <>\n      <div className=\"section-title\" data-test={DateFilterTestKey.CommonFrame}>\n        {t('Configure Time Range: Last...')}\n      </div>\n      <Radio.Group\n        value={commonRange}\n        onChange={(e: any) => props.onChange(e.target.value)}\n      >\n        {COMMON_RANGE_OPTIONS.map(({ value, label }) => (\n          <Radio key={value} value={value} className=\"vertical-radio\">\n            {label}\n          </Radio>\n        ))}\n      </Radio.Group>\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useEffect } from 'react';\nimport { t } from '@superset-ui/core';\nimport { Radio } from 'src/components/Radio';\nimport {\n  CALENDAR_RANGE_OPTIONS,\n  CALENDAR_RANGE_SET,\n} from 'src/explore/components/controls/DateFilterControl/utils';\nimport {\n  CalendarRangeType,\n  PreviousCalendarWeek,\n  FrameComponentProps,\n} from '../types';\n\nexport function CalendarFrame({ onChange, value }: FrameComponentProps) {\n  useEffect(() => {\n    if (!CALENDAR_RANGE_SET.has(value as CalendarRangeType)) {\n      onChange(PreviousCalendarWeek);\n    }\n  }, [onChange, value]);\n\n  if (!CALENDAR_RANGE_SET.has(value as CalendarRangeType)) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"section-title\">\n        {t('Configure Time Range: Previous...')}\n      </div>\n      <Radio.Group\n        value={value}\n        onChange={(e: any) => onChange(e.target.value)}\n      >\n        {CALENDAR_RANGE_OPTIONS.map(({ value, label }) => (\n          <Radio key={value} value={value} className=\"vertical-radio\">\n            {label}\n          </Radio>\n        ))}\n      </Radio.Group>\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { t } from '@superset-ui/core';\nimport { Moment } from 'moment';\nimport { isInteger } from 'lodash';\n// @ts-ignore\nimport { locales } from 'antd/dist/antd-with-locales';\nimport { Col, Row } from 'src/components';\nimport { InputNumber } from 'src/components/Input';\nimport { DatePicker } from 'src/components/DatePicker';\nimport { Radio } from 'src/components/Radio';\nimport Select from 'src/components/Select/Select';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport {\n  SINCE_GRAIN_OPTIONS,\n  SINCE_MODE_OPTIONS,\n  UNTIL_GRAIN_OPTIONS,\n  UNTIL_MODE_OPTIONS,\n  MOMENT_FORMAT,\n  MIDNIGHT,\n  customTimeRangeDecode,\n  customTimeRangeEncode,\n  dttmToMoment,\n  LOCALE_MAPPING,\n} from 'src/explore/components/controls/DateFilterControl/utils';\nimport {\n  CustomRangeKey,\n  FrameComponentProps,\n} from 'src/explore/components/controls/DateFilterControl/types';\nimport { ExplorePageState } from 'src/explore/types';\n\nexport function CustomFrame(props: FrameComponentProps) {\n  const { customRange, matchedFlag } = customTimeRangeDecode(props.value);\n  if (!matchedFlag) {\n    props.onChange(customTimeRangeEncode(customRange));\n  }\n  const {\n    sinceDatetime,\n    sinceMode,\n    sinceGrain,\n    sinceGrainValue,\n    untilDatetime,\n    untilMode,\n    untilGrain,\n    untilGrainValue,\n    anchorValue,\n    anchorMode,\n  } = { ...customRange };\n\n  function onChange(control: CustomRangeKey, value: string) {\n    props.onChange(\n      customTimeRangeEncode({\n        ...customRange,\n        [control]: value,\n      }),\n    );\n  }\n\n  function onGrainValue(\n    control: 'sinceGrainValue' | 'untilGrainValue',\n    value: string | number,\n  ) {\n    // only positive values in grainValue controls\n    if (isInteger(value) && value > 0) {\n      props.onChange(\n        customTimeRangeEncode({\n          ...customRange,\n          [control]: value,\n        }),\n      );\n    }\n  }\n\n  function onAnchorMode(option: any) {\n    const radioValue = option.target.value;\n    if (radioValue === 'now') {\n      props.onChange(\n        customTimeRangeEncode({\n          ...customRange,\n          anchorValue: 'now',\n          anchorMode: radioValue,\n        }),\n      );\n    } else {\n      props.onChange(\n        customTimeRangeEncode({\n          ...customRange,\n          anchorValue: MIDNIGHT,\n          anchorMode: radioValue,\n        }),\n      );\n    }\n  }\n\n  // check if there is a locale defined for explore\n  const localFromFlaskBabel = useSelector(\n    (state: ExplorePageState) => state?.common?.locale,\n  );\n  // An undefined datePickerLocale is acceptable if no match is found in the LOCALE_MAPPING[localFromFlaskBabel] lookup\n  // and will fall back to antd's default locale when the antd DataPicker's prop locale === undefined\n  // This also protects us from the case where state is populated with a locale that antd locales does not recognize\n  const datePickerLocale =\n    locales[LOCALE_MAPPING[localFromFlaskBabel]]?.DatePicker;\n\n  return (\n    <div data-test=\"custom-frame\">\n      <div className=\"section-title\">{t('Configure custom time range')}</div>\n      <Row gutter={24}>\n        <Col span={12}>\n          <div className=\"control-label\">\n            {t('START (INCLUSIVE)')}{' '}\n            <InfoTooltipWithTrigger\n              tooltip={t('Start date included in time range')}\n              placement=\"right\"\n            />\n          </div>\n          <Select\n            ariaLabel={t('START (INCLUSIVE)')}\n            options={SINCE_MODE_OPTIONS}\n            value={sinceMode}\n            onChange={(value: string) => onChange('sinceMode', value)}\n          />\n          {sinceMode === 'specific' && (\n            <Row>\n              <DatePicker\n                showTime\n                defaultValue={dttmToMoment(sinceDatetime)}\n                onChange={(datetime: Moment) =>\n                  onChange('sinceDatetime', datetime.format(MOMENT_FORMAT))\n                }\n                allowClear={false}\n                locale={datePickerLocale}\n              />\n            </Row>\n          )}\n          {sinceMode === 'relative' && (\n            <Row gutter={8}>\n              <Col span={11}>\n                {/* Make sure sinceGrainValue looks like a positive integer */}\n                <InputNumber\n                  placeholder={t('Relative quantity')}\n                  value={Math.abs(sinceGrainValue)}\n                  min={1}\n                  defaultValue={1}\n                  onChange={value =>\n                    onGrainValue('sinceGrainValue', value || 1)\n                  }\n                  onStep={value => onGrainValue('sinceGrainValue', value || 1)}\n                />\n              </Col>\n              <Col span={13}>\n                <Select\n                  ariaLabel={t('Relative period')}\n                  options={SINCE_GRAIN_OPTIONS}\n                  value={sinceGrain}\n                  onChange={(value: string) => onChange('sinceGrain', value)}\n                />\n              </Col>\n            </Row>\n          )}\n        </Col>\n        <Col span={12}>\n          <div className=\"control-label\">\n            {t('END (EXCLUSIVE)')}{' '}\n            <InfoTooltipWithTrigger\n              tooltip={t('End date excluded from time range')}\n              placement=\"right\"\n            />\n          </div>\n          <Select\n            ariaLabel={t('END (EXCLUSIVE)')}\n            options={UNTIL_MODE_OPTIONS}\n            value={untilMode}\n            onChange={(value: string) => onChange('untilMode', value)}\n          />\n          {untilMode === 'specific' && (\n            <Row>\n              <DatePicker\n                showTime\n                defaultValue={dttmToMoment(untilDatetime)}\n                onChange={(datetime: Moment) =>\n                  onChange('untilDatetime', datetime.format(MOMENT_FORMAT))\n                }\n                allowClear={false}\n                locale={datePickerLocale}\n              />\n            </Row>\n          )}\n          {untilMode === 'relative' && (\n            <Row gutter={8}>\n              <Col span={11}>\n                <InputNumber\n                  placeholder={t('Relative quantity')}\n                  value={untilGrainValue}\n                  min={1}\n                  defaultValue={1}\n                  onChange={value =>\n                    onGrainValue('untilGrainValue', value || 1)\n                  }\n                  onStep={value => onGrainValue('untilGrainValue', value || 1)}\n                />\n              </Col>\n              <Col span={13}>\n                <Select\n                  ariaLabel={t('Relative period')}\n                  options={UNTIL_GRAIN_OPTIONS}\n                  value={untilGrain}\n                  onChange={(value: string) => onChange('untilGrain', value)}\n                />\n              </Col>\n            </Row>\n          )}\n        </Col>\n      </Row>\n      {sinceMode === 'relative' && untilMode === 'relative' && (\n        <div className=\"control-anchor-to\">\n          <div className=\"control-label\">{t('Anchor to')}</div>\n          <Row align=\"middle\">\n            <Col>\n              <Radio.Group\n                onChange={onAnchorMode}\n                defaultValue=\"now\"\n                value={anchorMode}\n              >\n                <Radio key=\"now\" value=\"now\">\n                  {t('NOW')}\n                </Radio>\n                <Radio key=\"specific\" value=\"specific\">\n                  {t('Date/Time')}\n                </Radio>\n              </Radio.Group>\n            </Col>\n            {anchorMode !== 'now' && (\n              <Col>\n                <DatePicker\n                  showTime\n                  defaultValue={dttmToMoment(anchorValue)}\n                  onChange={(datetime: Moment) =>\n                    onChange('anchorValue', datetime.format(MOMENT_FORMAT))\n                  }\n                  allowClear={false}\n                  className=\"control-anchor-to-datetime\"\n                  locale={datePickerLocale}\n                />\n              </Col>\n            )}\n          </Row>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { useTheme, t } from '@superset-ui/core';\n\nimport { Tooltip } from 'src/components/Tooltip';\nimport { ClassNames } from '@emotion/react';\n\nconst TIME_PICKER_HELPER = (\n  <>\n    <div>\n      <h3>DATETIME</h3>\n      <p>{t('Return to specific datetime.')}</p>\n      <h4>{t('Syntax')}</h4>\n      <pre>\n        <code>datetime([string])</code>\n      </pre>\n      <h4>{t('Example')}</h4>\n      <pre>\n        <code>{`datetime(\"2020-03-01 12:00:00\")\ndatetime(\"now\")\ndatetime(\"last year\")`}</code>\n      </pre>\n    </div>\n    <div>\n      <h3>DATEADD</h3>\n      <p>{t('Moves the given set of dates by a specified interval.')}</p>\n      <h4>{t('Syntax')}</h4>\n      <pre>\n        <code>{`dateadd([datetime], [integer], [dateunit])\ndateunit = (year | quarter | month | week | day | hour | minute | second)`}</code>\n      </pre>\n      <h4>{t('Example')}</h4>\n      <pre>\n        <code>{`dateadd(datetime(\"today\"), -13, day)\ndateadd(datetime(\"2020-03-01\"), 2, day)`}</code>\n      </pre>\n    </div>\n    <div>\n      <h3>DATETRUNC</h3>\n      <p>\n        {t(\n          'Truncates the specified date to the accuracy specified by the date unit.',\n        )}\n      </p>\n      <h4>{t('Syntax')}</h4>\n      <pre>\n        <code>{`datetrunc([datetime], [dateunit])\ndateunit = (year | quarter | month | week)`}</code>\n      </pre>\n      <h4>{t('Example')}</h4>\n      <pre>\n        <code>{`datetrunc(datetime(\"2020-03-01\"), week)\ndatetrunc(datetime(\"2020-03-01\"), month)`}</code>\n      </pre>\n    </div>\n    <div>\n      <h3>LASTDAY</h3>\n      <p>{t('Get the last date by the date unit.')}</p>\n      <h4>{t('Syntax')}</h4>\n      <pre>\n        <code>{`lastday([datetime], [dateunit])\ndateunit = (year | month | week)`}</code>\n      </pre>\n      <h4>{t('Example')}</h4>\n      <pre>\n        <code>lastday(datetime(\"today\"), month)</code>\n      </pre>\n    </div>\n    <div>\n      <h3>HOLIDAY</h3>\n      <p>{t('Get the specify date for the holiday')}</p>\n      <h4>{t('Syntax')}</h4>\n      <pre>\n        <code>{`holiday([string])\nholiday([holiday string], [datetime])\nholiday([holiday string], [datetime], [country name])`}</code>\n      </pre>\n      <h4>{t('Example')}</h4>\n      <pre>\n        <code>{`holiday(\"new year\")\nholiday(\"christmas\", datetime(\"2019\"))\nholiday(\"christmas\", dateadd(datetime(\"2019\"), 1, year))\nholiday(\"christmas\", datetime(\"2 years ago\"))\nholiday(\"Easter Monday\", datetime(\"2019\"), \"UK\")`}</code>\n      </pre>\n    </div>\n  </>\n);\n\nconst StyledTooltip = (props: any) => {\n  const theme = useTheme();\n  return (\n    <ClassNames>\n      {({ css }) => (\n        <Tooltip\n          overlayClassName={css`\n            .ant-tooltip-content {\n              min-width: ${theme.gridUnit * 125}px;\n              max-height: 410px;\n              overflow-y: scroll;\n\n              .ant-tooltip-inner {\n                max-width: ${theme.gridUnit * 125}px;\n                h3 {\n                  font-size: ${theme.typography.sizes.m}px;\n                  font-weight: ${theme.typography.weights.bold};\n                }\n                h4 {\n                  font-size: ${theme.typography.sizes.m}px;\n                  font-weight: ${theme.typography.weights.bold};\n                }\n                pre {\n                  border: none;\n                  text-align: left;\n                  word-break: break-word;\n                  font-size: ${theme.typography.sizes.s}px;\n                }\n              }\n            }\n          `}\n          {...props}\n        />\n      )}\n    </ClassNames>\n  );\n};\n\nexport default function DateFunctionTooltip(props: any) {\n  return <StyledTooltip title={TIME_PICKER_HELPER} {...props} />;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport { t } from '@superset-ui/core';\nimport { SEPARATOR } from 'src/explore/components/controls/DateFilterControl/utils';\nimport { Input } from 'src/components/Input';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport { FrameComponentProps } from 'src/explore/components/controls/DateFilterControl/types';\nimport DateFunctionTooltip from './DateFunctionTooltip';\n\nfunction getAdvancedRange(value: string): string {\n  if (value.includes(SEPARATOR)) {\n    return value;\n  }\n  if (value.startsWith('Last')) {\n    return [value, ''].join(SEPARATOR);\n  }\n  if (value.startsWith('Next')) {\n    return ['', value].join(SEPARATOR);\n  }\n  return SEPARATOR;\n}\n\nexport function AdvancedFrame(props: FrameComponentProps) {\n  const advancedRange = getAdvancedRange(props.value || '');\n  const [since, until] = advancedRange.split(SEPARATOR);\n  if (advancedRange !== props.value) {\n    props.onChange(getAdvancedRange(props.value || ''));\n  }\n\n  function onChange(control: 'since' | 'until', value: string) {\n    if (control === 'since') {\n      props.onChange(`${value}${SEPARATOR}${until}`);\n    } else {\n      props.onChange(`${since}${SEPARATOR}${value}`);\n    }\n  }\n\n  return (\n    <>\n      <div className=\"section-title\">\n        {t('Configure Advanced Time Range ')}\n        <DateFunctionTooltip placement=\"rightBottom\">\n          <i className=\"fa fa-info-circle text-muted\" />\n        </DateFunctionTooltip>\n      </div>\n      <div className=\"control-label\">\n        {t('START (INCLUSIVE)')}{' '}\n        <InfoTooltipWithTrigger\n          tooltip={t('Start date included in time range')}\n          placement=\"right\"\n        />\n      </div>\n      <Input\n        key=\"since\"\n        value={since}\n        onChange={e => onChange('since', e.target.value)}\n      />\n      <div className=\"control-label\">\n        {t('END (EXCLUSIVE)')}{' '}\n        <InfoTooltipWithTrigger\n          tooltip={t('End date excluded from time range')}\n          placement=\"right\"\n        />\n      </div>\n      <Input\n        key=\"until\"\n        value={until}\n        onChange={e => onChange('until', e.target.value)}\n      />\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React, { forwardRef, ReactNode, RefObject } from 'react';\nimport { css, styled, useTheme, t } from '@superset-ui/core';\nimport Icons from 'src/components/Icons';\n\nexport type DateLabelProps = {\n  label: ReactNode;\n  isActive?: boolean;\n  isPlaceholder?: boolean;\n  onClick?: (event: React.MouseEvent) => void;\n};\n\n// This is the color that antd components (such as Select or Input) use on hover\n// TODO: use theme.colors.primary.base here and in antd components\nconst ACTIVE_BORDER_COLOR = '#45BED6';\n\nconst LabelContainer = styled.div<{\n  isActive?: boolean;\n  isPlaceholder?: boolean;\n}>`\n  ${({ theme, isActive, isPlaceholder }) => css`\n    width: 100%;\n    height: ${theme.gridUnit * 8}px;\n\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n\n    padding: 0 ${theme.gridUnit * 3}px;\n\n    background-color: ${theme.colors.grayscale.light5};\n\n    border: 1px solid\n      ${isActive ? ACTIVE_BORDER_COLOR : theme.colors.grayscale.light2};\n    border-radius: ${theme.borderRadius}px;\n\n    cursor: pointer;\n\n    transition: border-color 0.3s cubic-bezier(0.65, 0.05, 0.36, 1);\n    :hover,\n    :focus {\n      border-color: ${ACTIVE_BORDER_COLOR};\n    }\n\n    .date-label-content {\n      color: ${isPlaceholder\n        ? theme.colors.grayscale.light1\n        : theme.colors.grayscale.dark1};\n      overflow: hidden;\n      text-overflow: ellipsis;\n      min-width: 0;\n      flex-shrink: 1;\n      white-space: nowrap;\n    }\n\n    span[role='img'] {\n      margin-left: auto;\n      padding-left: ${theme.gridUnit}px;\n\n      & > span[role='img'] {\n        line-height: 0;\n      }\n    }\n  `}\n`;\n\nexport const DateLabel = forwardRef(\n  (props: DateLabelProps, ref: RefObject<HTMLSpanElement>) => {\n    const theme = useTheme();\n    return (\n      <LabelContainer {...props} tabIndex={0}>\n        <span className=\"date-label-content\" ref={ref}>\n          {typeof props.label === 'string' ? t(props.label) : props.label}\n        </span>\n        <Icons.CalendarOutlined\n          iconSize=\"s\"\n          iconColor={theme.colors.grayscale.base}\n        />\n      </LabelContainer>\n    );\n  },\n);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { ReactNode, useState, useEffect, useMemo } from 'react';\nimport {\n  css,\n  styled,\n  t,\n  useTheme,\n  NO_TIME_RANGE,\n  SupersetTheme,\n  useCSSTextTruncation,\n} from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport Modal from 'src/components/Modal';\nimport { Divider } from 'src/components';\nimport Icons from 'src/components/Icons';\nimport Select from 'src/components/Select/Select';\nimport { Tooltip } from 'src/components/Tooltip';\nimport { useDebouncedEffect } from 'src/explore/exploreUtils';\nimport { SLOW_DEBOUNCE } from 'src/constants';\nimport { noOp } from 'src/utils/common';\nimport ControlPopover from '../ControlPopover/ControlPopover';\n\nimport { DateFilterControlProps, FrameType } from './types';\nimport {\n  DateFilterTestKey,\n  fetchTimeRange,\n  FRAME_OPTIONS,\n  guessFrame,\n  useDefaultTimeFilter,\n} from './utils';\nimport {\n  CommonFrame,\n  CalendarFrame,\n  CustomFrame,\n  AdvancedFrame,\n  DateLabel,\n} from './components';\n\nconst StyledRangeType = styled(Select)`\n  width: 272px;\n`;\n\nconst ContentStyleWrapper = styled.div`\n  ${({ theme }) => css`\n    .ant-row {\n      margin-top: 8px;\n    }\n\n    .ant-input-number {\n      width: 100%;\n    }\n\n    .ant-picker {\n      padding: 4px 17px 4px;\n      border-radius: 4px;\n      width: 100%;\n    }\n\n    .ant-divider-horizontal {\n      margin: 16px 0;\n    }\n\n    .control-label {\n      font-size: 11px;\n      font-weight: ${theme.typography.weights.medium};\n      color: ${theme.colors.grayscale.light2};\n      line-height: 16px;\n      text-transform: uppercase;\n      margin: 8px 0;\n    }\n\n    .vertical-radio {\n      display: block;\n      height: 40px;\n      line-height: 40px;\n    }\n\n    .section-title {\n      font-style: normal;\n      font-weight: ${theme.typography.weights.bold};\n      font-size: 15px;\n      line-height: 24px;\n      margin-bottom: 8px;\n    }\n\n    .control-anchor-to {\n      margin-top: 16px;\n    }\n\n    .control-anchor-to-datetime {\n      width: 217px;\n    }\n\n    .footer {\n      text-align: right;\n    }\n  `}\n`;\n\nconst IconWrapper = styled.span`\n  span {\n    margin-right: ${({ theme }) => 2 * theme.gridUnit}px;\n    vertical-align: middle;\n  }\n  .text {\n    vertical-align: middle;\n  }\n  .error {\n    color: ${({ theme }) => theme.colors.error.base};\n  }\n`;\n\nconst getTooltipTitle = (\n  isLabelTruncated: boolean,\n  label: string | undefined,\n  range: string | undefined,\n) =>\n  isLabelTruncated ? (\n    <div>\n      {label && <strong>{label}</strong>}\n      {range && (\n        <div\n          css={(theme: SupersetTheme) => css`\n            margin-top: ${theme.gridUnit}px;\n          `}\n        >\n          {range}\n        </div>\n      )}\n    </div>\n  ) : (\n    range || null\n  );\n\nexport default function DateFilterLabel(props: DateFilterControlProps) {\n  const {\n    onChange,\n    onOpenPopover = noOp,\n    onClosePopover = noOp,\n    overlayStyle = 'Popover',\n    isOverflowingFilterBar = false,\n  } = props;\n  const defaultTimeFilter = useDefaultTimeFilter();\n\n  const value = props.value ?? defaultTimeFilter;\n  const [actualTimeRange, setActualTimeRange] = useState<string>(value);\n\n  const [show, setShow] = useState<boolean>(false);\n  const guessedFrame = useMemo(() => guessFrame(value), [value]);\n  const [frame, setFrame] = useState<FrameType>(guessedFrame);\n  const [lastFetchedTimeRange, setLastFetchedTimeRange] = useState(value);\n  const [timeRangeValue, setTimeRangeValue] = useState(value);\n  const [validTimeRange, setValidTimeRange] = useState<boolean>(false);\n  const [evalResponse, setEvalResponse] = useState<string>(value);\n  const [tooltipTitle, setTooltipTitle] = useState<ReactNode | null>(value);\n  const theme = useTheme();\n  const [labelRef, labelIsTruncated] = useCSSTextTruncation<HTMLSpanElement>();\n\n  useEffect(() => {\n    if (value === NO_TIME_RANGE) {\n      setActualTimeRange(NO_TIME_RANGE);\n      setTooltipTitle(null);\n      setValidTimeRange(true);\n      return;\n    }\n    fetchTimeRange(value).then(({ value: actualRange, error }) => {\n      if (error) {\n        setEvalResponse(error || '');\n        setValidTimeRange(false);\n        setTooltipTitle(value || null);\n      } else {\n        /*\n          HRT == human readable text\n          ADR == actual datetime range\n          +--------------+------+----------+--------+----------+-----------+\n          |              | Last | Previous | Custom | Advanced | No Filter |\n          +--------------+------+----------+--------+----------+-----------+\n          | control pill | HRT  | HRT      | ADR    | ADR      |   HRT     |\n          +--------------+------+----------+--------+----------+-----------+\n          | tooltip      | ADR  | ADR      | HRT    | HRT      |   ADR     |\n          +--------------+------+----------+--------+----------+-----------+\n        */\n        if (\n          guessedFrame === 'Common' ||\n          guessedFrame === 'Calendar' ||\n          guessedFrame === 'No filter'\n        ) {\n          setActualTimeRange(value);\n          setTooltipTitle(\n            getTooltipTitle(labelIsTruncated, value, actualRange),\n          );\n        } else {\n          setActualTimeRange(actualRange || '');\n          setTooltipTitle(\n            getTooltipTitle(labelIsTruncated, actualRange, value),\n          );\n        }\n        setValidTimeRange(true);\n      }\n      setLastFetchedTimeRange(value);\n      setEvalResponse(actualRange || value);\n    });\n  }, [guessedFrame, labelIsTruncated, labelRef, value]);\n\n  useDebouncedEffect(\n    () => {\n      if (timeRangeValue === NO_TIME_RANGE) {\n        setEvalResponse(NO_TIME_RANGE);\n        setLastFetchedTimeRange(NO_TIME_RANGE);\n        setValidTimeRange(true);\n        return;\n      }\n      if (lastFetchedTimeRange !== timeRangeValue) {\n        fetchTimeRange(timeRangeValue).then(({ value: actualRange, error }) => {\n          if (error) {\n            setEvalResponse(error || '');\n            setValidTimeRange(false);\n          } else {\n            setEvalResponse(actualRange || '');\n            setValidTimeRange(true);\n          }\n          setLastFetchedTimeRange(timeRangeValue);\n        });\n      }\n    },\n    SLOW_DEBOUNCE,\n    [timeRangeValue],\n  );\n\n  function onSave() {\n    onChange(timeRangeValue);\n    setShow(false);\n    onClosePopover();\n  }\n\n  function onOpen() {\n    setTimeRangeValue(value);\n    setFrame(guessedFrame);\n    setShow(true);\n    onOpenPopover();\n  }\n\n  function onHide() {\n    setTimeRangeValue(value);\n    setFrame(guessedFrame);\n    setShow(false);\n    onClosePopover();\n  }\n\n  const toggleOverlay = () => {\n    if (show) {\n      onHide();\n    } else {\n      onOpen();\n    }\n  };\n\n  function onChangeFrame(value: FrameType) {\n    if (value === NO_TIME_RANGE) {\n      setTimeRangeValue(NO_TIME_RANGE);\n    }\n    setFrame(value);\n  }\n\n  const overlayContent = (\n    <ContentStyleWrapper>\n      <div className=\"control-label\">{t('RANGE TYPE')}</div>\n      <StyledRangeType\n        ariaLabel={t('RANGE TYPE')}\n        options={FRAME_OPTIONS}\n        value={frame}\n        onChange={onChangeFrame}\n      />\n      {frame !== 'No filter' && <Divider />}\n      {frame === 'Common' && (\n        <CommonFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'Calendar' && (\n        <CalendarFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'Advanced' && (\n        <AdvancedFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'Custom' && (\n        <CustomFrame value={timeRangeValue} onChange={setTimeRangeValue} />\n      )}\n      {frame === 'No filter' && <div data-test={DateFilterTestKey.NoFilter} />}\n      <Divider />\n      <div>\n        <div className=\"section-title\">{t('Actual time range')}</div>\n        {validTimeRange && (\n          <div>\n            {evalResponse === 'No filter' ? t('No filter') : evalResponse}\n          </div>\n        )}\n        {!validTimeRange && (\n          <IconWrapper className=\"warning\">\n            <Icons.ErrorSolidSmall iconColor={theme.colors.error.base} />\n            <span className=\"text error\">{evalResponse}</span>\n          </IconWrapper>\n        )}\n      </div>\n      <Divider />\n      <div className=\"footer\">\n        <Button\n          buttonStyle=\"secondary\"\n          cta\n          key=\"cancel\"\n          onClick={onHide}\n          data-test={DateFilterTestKey.CancelButton}\n        >\n          {t('CANCEL')}\n        </Button>\n        <Button\n          buttonStyle=\"primary\"\n          cta\n          disabled={!validTimeRange}\n          key=\"apply\"\n          onClick={onSave}\n          data-test={DateFilterTestKey.ApplyButton}\n        >\n          {t('APPLY')}\n        </Button>\n      </div>\n    </ContentStyleWrapper>\n  );\n\n  const title = (\n    <IconWrapper>\n      <Icons.EditAlt iconColor={theme.colors.grayscale.base} />\n      <span className=\"text\">{t('Edit time range')}</span>\n    </IconWrapper>\n  );\n\n  const popoverContent = (\n    <ControlPopover\n      placement=\"right\"\n      trigger=\"click\"\n      content={overlayContent}\n      title={title}\n      defaultVisible={show}\n      visible={show}\n      onVisibleChange={toggleOverlay}\n      overlayStyle={{ width: '600px' }}\n      getPopupContainer={triggerNode =>\n        isOverflowingFilterBar\n          ? (triggerNode.parentNode as HTMLElement)\n          : document.body\n      }\n      destroyTooltipOnHide\n    >\n      <Tooltip\n        placement=\"top\"\n        title={tooltipTitle}\n        getPopupContainer={trigger => trigger.parentElement as HTMLElement}\n      >\n        <DateLabel\n          label={actualTimeRange}\n          isActive={show}\n          isPlaceholder={actualTimeRange === NO_TIME_RANGE}\n          data-test={DateFilterTestKey.PopoverOverlay}\n          ref={labelRef}\n        />\n      </Tooltip>\n    </ControlPopover>\n  );\n\n  const modalContent = (\n    <>\n      <Tooltip\n        placement=\"top\"\n        title={tooltipTitle}\n        getPopupContainer={trigger => trigger.parentElement as HTMLElement}\n      >\n        <DateLabel\n          onClick={toggleOverlay}\n          label={actualTimeRange}\n          isActive={show}\n          isPlaceholder={actualTimeRange === NO_TIME_RANGE}\n          data-test={DateFilterTestKey.ModalOverlay}\n          ref={labelRef}\n        />\n      </Tooltip>\n      {/* the zIndex value is from trying so that the Modal doesn't overlay the AdhocFilter */}\n      <Modal\n        title={title}\n        show={show}\n        onHide={toggleOverlay}\n        width=\"600px\"\n        hideFooter\n        zIndex={1030}\n      >\n        {overlayContent}\n      </Modal>\n    </>\n  );\n\n  return (\n    <>\n      <ControlHeader {...props} />\n      {overlayStyle === 'Modal' ? modalContent : popoverContent}\n    </>\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport type SelectOptionType = {\n  value: string;\n  label: string;\n};\n\nexport type FrameType =\n  | 'Common'\n  | 'Calendar'\n  | 'Custom'\n  | 'Advanced'\n  | 'No filter';\n\nexport type DateTimeGrainType =\n  | 'second'\n  | 'minute'\n  | 'hour'\n  | 'day'\n  | 'week'\n  | 'month'\n  | 'quarter'\n  | 'year';\n\nexport type CustomRangeKey =\n  | 'sinceMode'\n  | 'sinceDatetime'\n  | 'sinceGrain'\n  | 'sinceGrainValue'\n  | 'untilMode'\n  | 'untilDatetime'\n  | 'untilGrain'\n  | 'untilGrainValue'\n  | 'anchorMode'\n  | 'anchorValue';\n\nexport type DateTimeModeType = 'specific' | 'relative' | 'now' | 'today';\n\nexport type CustomRangeType = {\n  sinceMode: DateTimeModeType;\n  sinceDatetime: string;\n  sinceGrain: DateTimeGrainType;\n  sinceGrainValue: number;\n  untilMode: DateTimeModeType;\n  untilDatetime: string;\n  untilGrain: DateTimeGrainType;\n  untilGrainValue: number;\n  anchorMode: 'now' | 'specific';\n  anchorValue: string;\n};\n\nexport type CustomRangeDecodeType = {\n  customRange: CustomRangeType;\n  matchedFlag: boolean;\n};\n\nexport type CommonRangeType =\n  | 'Last day'\n  | 'Last week'\n  | 'Last month'\n  | 'Last quarter'\n  | 'Last year';\n\nexport const PreviousCalendarWeek = 'previous calendar week';\nexport const PreviousCalendarMonth = 'previous calendar month';\nexport const PreviousCalendarYear = 'previous calendar year';\nexport type CalendarRangeType =\n  | typeof PreviousCalendarWeek\n  | typeof PreviousCalendarMonth\n  | typeof PreviousCalendarYear;\n\nexport type FrameComponentProps = {\n  onChange: (timeRange: string) => void;\n  value: string;\n};\n\nexport interface DateFilterControlProps {\n  name: string;\n  onChange: (timeRange: string) => void;\n  value?: string;\n  onOpenPopover?: () => void;\n  onClosePopover?: () => void;\n  overlayStyle?: 'Modal' | 'Popover';\n  isOverflowingFilterBar?: boolean;\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport rison from 'rison';\nimport { SupersetClient, NO_TIME_RANGE, JsonObject } from '@superset-ui/core';\nimport { getClientErrorObject } from 'src/utils/getClientErrorObject';\nimport { useSelector } from 'react-redux';\nimport {\n  COMMON_RANGE_VALUES_SET,\n  CALENDAR_RANGE_VALUES_SET,\n  customTimeRangeDecode,\n} from '.';\nimport { FrameType } from '../types';\n\nexport const SEPARATOR = ' : ';\n\nexport const buildTimeRangeString = (since: string, until: string): string =>\n  `${since}${SEPARATOR}${until}`;\n\nconst formatDateEndpoint = (dttm: string, isStart?: boolean): string =>\n  dttm.replace('T00:00:00', '') || (isStart ? '-∞' : '∞');\n\nexport const formatTimeRange = (\n  timeRange: string,\n  columnPlaceholder = 'col',\n) => {\n  const splitDateRange = timeRange.split(SEPARATOR);\n  if (splitDateRange.length === 1) return timeRange;\n  return `${formatDateEndpoint(\n    splitDateRange[0],\n    true,\n  )} ≤ ${columnPlaceholder} < ${formatDateEndpoint(splitDateRange[1])}`;\n};\n\nexport const guessFrame = (timeRange: string): FrameType => {\n  if (COMMON_RANGE_VALUES_SET.has(timeRange)) {\n    return 'Common';\n  }\n  if (CALENDAR_RANGE_VALUES_SET.has(timeRange)) {\n    return 'Calendar';\n  }\n  if (timeRange === NO_TIME_RANGE) {\n    return 'No filter';\n  }\n  if (customTimeRangeDecode(timeRange).matchedFlag) {\n    return 'Custom';\n  }\n  return 'Advanced';\n};\n\nexport const fetchTimeRange = async (\n  timeRange: string,\n  columnPlaceholder = 'col',\n) => {\n  const query = rison.encode_uri(timeRange);\n  const endpoint = `/api/v1/time_range/?q=${query}`;\n  try {\n    const response = await SupersetClient.get({ endpoint });\n    const timeRangeString = buildTimeRangeString(\n      response?.json?.result?.since || '',\n      response?.json?.result?.until || '',\n    );\n    return {\n      value: formatTimeRange(timeRangeString, columnPlaceholder),\n    };\n  } catch (response) {\n    const clientError = await getClientErrorObject(response);\n    return {\n      error: clientError.message || clientError.error || response.statusText,\n    };\n  }\n};\n\nexport function useDefaultTimeFilter() {\n  return (\n    useSelector(\n      (state: JsonObject) => state?.common?.conf?.DEFAULT_TIME_FILTER,\n    ) ?? NO_TIME_RANGE\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport moment from 'moment';\nimport { t } from '@superset-ui/core';\nimport {\n  SelectOptionType,\n  PreviousCalendarWeek,\n  PreviousCalendarMonth,\n  PreviousCalendarYear,\n  CommonRangeType,\n  CalendarRangeType,\n} from 'src/explore/components/controls/DateFilterControl/types';\n\nexport const FRAME_OPTIONS: SelectOptionType[] = [\n  { value: 'Common', label: t('Last') },\n  { value: 'Calendar', label: t('Previous') },\n  { value: 'Custom', label: t('Custom') },\n  { value: 'Advanced', label: t('Advanced') },\n  { value: 'No filter', label: t('No filter') },\n];\n\nexport const COMMON_RANGE_OPTIONS: SelectOptionType[] = [\n  { value: 'Last day', label: t('Last day') },\n  { value: 'Last week', label: t('Last week') },\n  { value: 'Last month', label: t('Last month') },\n  { value: 'Last quarter', label: t('Last quarter') },\n  { value: 'Last year', label: t('Last year') },\n];\nexport const COMMON_RANGE_VALUES_SET = new Set(\n  COMMON_RANGE_OPTIONS.map(({ value }) => value),\n);\n\nexport const CALENDAR_RANGE_OPTIONS: SelectOptionType[] = [\n  { value: PreviousCalendarWeek, label: t('previous calendar week') },\n  {\n    value: PreviousCalendarMonth,\n    label: t('previous calendar month'),\n  },\n  { value: PreviousCalendarYear, label: t('previous calendar year') },\n];\nexport const CALENDAR_RANGE_VALUES_SET = new Set(\n  CALENDAR_RANGE_OPTIONS.map(({ value }) => value),\n);\n\nconst GRAIN_OPTIONS = [\n  { value: 'second', label: (rel: string) => t('Seconds %s', rel) },\n  { value: 'minute', label: (rel: string) => t('Minutes %s', rel) },\n  { value: 'hour', label: (rel: string) => t('Hours %s', rel) },\n  { value: 'day', label: (rel: string) => t('Days %s', rel) },\n  { value: 'week', label: (rel: string) => t('Weeks %s', rel) },\n  { value: 'month', label: (rel: string) => t('Months %s', rel) },\n  { value: 'quarter', label: (rel: string) => t('Quarters %s', rel) },\n  { value: 'year', label: (rel: string) => t('Years %s', rel) },\n];\n\nexport const SINCE_GRAIN_OPTIONS: SelectOptionType[] = GRAIN_OPTIONS.map(\n  item => ({\n    value: item.value,\n    label: item.label(t('Before')),\n  }),\n);\n\nexport const UNTIL_GRAIN_OPTIONS: SelectOptionType[] = GRAIN_OPTIONS.map(\n  item => ({\n    value: item.value,\n    label: item.label(t('After')),\n  }),\n);\n\nexport const SINCE_MODE_OPTIONS: SelectOptionType[] = [\n  { value: 'specific', label: t('Specific Date/Time') },\n  { value: 'relative', label: t('Relative Date/Time') },\n  { value: 'now', label: t('Now') },\n  { value: 'today', label: t('Midnight') },\n];\n\nexport const UNTIL_MODE_OPTIONS: SelectOptionType[] =\n  SINCE_MODE_OPTIONS.slice();\n\nexport const COMMON_RANGE_SET: Set<CommonRangeType> = new Set([\n  'Last day',\n  'Last week',\n  'Last month',\n  'Last quarter',\n  'Last year',\n]);\n\nexport const CALENDAR_RANGE_SET: Set<CalendarRangeType> = new Set([\n  PreviousCalendarWeek,\n  PreviousCalendarMonth,\n  PreviousCalendarYear,\n]);\n\nexport const MOMENT_FORMAT = 'YYYY-MM-DD[T]HH:mm:ss';\nexport const SEVEN_DAYS_AGO = moment()\n  .utc()\n  .startOf('day')\n  .subtract(7, 'days')\n  .format(MOMENT_FORMAT);\nexport const MIDNIGHT = moment().utc().startOf('day').format(MOMENT_FORMAT);\n\nexport const LOCALE_MAPPING = {\n  en: 'en_US',\n  fr: 'fr_FR',\n  es: 'es_ES',\n  it: 'it_IT',\n  zh: 'zh_CN',\n  ja: 'ja_JP',\n  de: 'de_DE',\n  pt: 'pt_PT',\n  pt_BR: 'pt_BR',\n  ru: 'ru_RU',\n  ko: 'ko_KR',\n  sk: 'sk_SK',\n  sl: 'sl_SI',\n  nl: 'nl_NL',\n};\n\nexport enum DateFilterTestKey {\n  CommonFrame = 'common-frame',\n  ModalOverlay = 'modal-overlay',\n  PopoverOverlay = 'time-range-trigger',\n  NoFilter = 'no-filter',\n  CancelButton = 'cancel-button',\n  ApplyButton = 'date-filter-control__apply-button',\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport moment, { Moment } from 'moment';\nimport {\n  CustomRangeDecodeType,\n  CustomRangeType,\n  DateTimeGrainType,\n  DateTimeModeType,\n} from 'src/explore/components/controls/DateFilterControl/types';\nimport { SEPARATOR } from './dateFilterUtils';\nimport { SEVEN_DAYS_AGO, MIDNIGHT, MOMENT_FORMAT } from './constants';\n\n/**\n * RegExp to test a string for a full ISO 8601 Date\n * Does not do any sort of date validation, only checks if the string is according to the ISO 8601 spec.\n *  YYYY-MM-DDThh:mm:ss\n *  YYYY-MM-DDThh:mm:ssTZD\n *  YYYY-MM-DDThh:mm:ss.sTZD\n * @see: https://www.w3.org/TR/NOTE-datetime\n */\nconst iso8601 = String.raw`\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.\\d+)?(?:(?:[+-]\\d\\d:\\d\\d)|Z)?`;\nconst datetimeConstant = String.raw`(?:TODAY|NOW)`;\nconst grainValue = String.raw`[+-]?[1-9][0-9]*`;\nconst grain = String.raw`YEAR|QUARTER|MONTH|WEEK|DAY|HOUR|MINUTE|SECOND`;\nconst CUSTOM_RANGE_EXPRESSION = RegExp(\n  String.raw`^DATEADD\\(DATETIME\\(\"(${iso8601}|${datetimeConstant})\"\\),\\s(${grainValue}),\\s(${grain})\\)$`,\n  'i',\n);\nexport const ISO8601_AND_CONSTANT = RegExp(\n  String.raw`^${iso8601}$|^${datetimeConstant}$`,\n  'i',\n);\nconst DATETIME_CONSTANT = ['now', 'today'];\nconst defaultCustomRange: CustomRangeType = {\n  sinceDatetime: SEVEN_DAYS_AGO,\n  sinceMode: 'relative',\n  sinceGrain: 'day',\n  sinceGrainValue: -7,\n  untilDatetime: MIDNIGHT,\n  untilMode: 'specific',\n  untilGrain: 'day',\n  untilGrainValue: 7,\n  anchorMode: 'now',\n  anchorValue: 'now',\n};\nconst SPECIFIC_MODE = ['specific', 'today', 'now'];\n\nexport const dttmToMoment = (dttm: string): Moment => {\n  if (dttm === 'now') {\n    return moment().utc().startOf('second');\n  }\n  if (dttm === 'today') {\n    return moment().utc().startOf('day');\n  }\n  return moment(dttm);\n};\n\nexport const dttmToString = (dttm: string): string =>\n  dttmToMoment(dttm).format(MOMENT_FORMAT);\n\nexport const customTimeRangeDecode = (\n  timeRange: string,\n): CustomRangeDecodeType => {\n  const splitDateRange = timeRange.split(SEPARATOR);\n\n  if (splitDateRange.length === 2) {\n    const [since, until] = splitDateRange;\n\n    // specific : specific\n    if (ISO8601_AND_CONSTANT.test(since) && ISO8601_AND_CONSTANT.test(until)) {\n      const sinceMode = (\n        DATETIME_CONSTANT.includes(since) ? since : 'specific'\n      ) as DateTimeModeType;\n      const untilMode = (\n        DATETIME_CONSTANT.includes(until) ? until : 'specific'\n      ) as DateTimeModeType;\n      return {\n        customRange: {\n          ...defaultCustomRange,\n          sinceDatetime: since,\n          untilDatetime: until,\n          sinceMode,\n          untilMode,\n        },\n        matchedFlag: true,\n      };\n    }\n\n    // relative : specific\n    const sinceCapturedGroup = since.match(CUSTOM_RANGE_EXPRESSION);\n    if (\n      sinceCapturedGroup &&\n      ISO8601_AND_CONSTANT.test(until) &&\n      since.includes(until)\n    ) {\n      const [dttm, grainValue, grain] = sinceCapturedGroup.slice(1);\n      const untilMode = (\n        DATETIME_CONSTANT.includes(until) ? until : 'specific'\n      ) as DateTimeModeType;\n      return {\n        customRange: {\n          ...defaultCustomRange,\n          sinceGrain: grain as DateTimeGrainType,\n          sinceGrainValue: parseInt(grainValue, 10),\n          sinceDatetime: dttm,\n          untilDatetime: dttm,\n          sinceMode: 'relative',\n          untilMode,\n        },\n        matchedFlag: true,\n      };\n    }\n\n    // specific : relative\n    const untilCapturedGroup = until.match(CUSTOM_RANGE_EXPRESSION);\n    if (\n      ISO8601_AND_CONSTANT.test(since) &&\n      untilCapturedGroup &&\n      until.includes(since)\n    ) {\n      const [dttm, grainValue, grain] = [...untilCapturedGroup.slice(1)];\n      const sinceMode = (\n        DATETIME_CONSTANT.includes(since) ? since : 'specific'\n      ) as DateTimeModeType;\n      return {\n        customRange: {\n          ...defaultCustomRange,\n          untilGrain: grain as DateTimeGrainType,\n          untilGrainValue: parseInt(grainValue, 10),\n          sinceDatetime: dttm,\n          untilDatetime: dttm,\n          untilMode: 'relative',\n          sinceMode,\n        },\n        matchedFlag: true,\n      };\n    }\n\n    // relative : relative\n    if (sinceCapturedGroup && untilCapturedGroup) {\n      const [sinceDttm, sinceGrainValue, sinceGrain] = [\n        ...sinceCapturedGroup.slice(1),\n      ];\n      const [untileDttm, untilGrainValue, untilGrain] = [\n        ...untilCapturedGroup.slice(1),\n      ];\n      if (sinceDttm === untileDttm) {\n        return {\n          customRange: {\n            ...defaultCustomRange,\n            sinceGrain: sinceGrain as DateTimeGrainType,\n            sinceGrainValue: parseInt(sinceGrainValue, 10),\n            sinceDatetime: sinceDttm,\n            untilGrain: untilGrain as DateTimeGrainType,\n            untilGrainValue: parseInt(untilGrainValue, 10),\n            untilDatetime: untileDttm,\n            anchorValue: sinceDttm,\n            sinceMode: 'relative',\n            untilMode: 'relative',\n            anchorMode: sinceDttm === 'now' ? 'now' : 'specific',\n          },\n          matchedFlag: true,\n        };\n      }\n    }\n  }\n\n  return {\n    customRange: defaultCustomRange,\n    matchedFlag: false,\n  };\n};\n\nexport const customTimeRangeEncode = (customRange: CustomRangeType): string => {\n  const {\n    sinceDatetime,\n    sinceMode,\n    sinceGrain,\n    sinceGrainValue,\n    untilDatetime,\n    untilMode,\n    untilGrain,\n    untilGrainValue,\n    anchorValue,\n  } = { ...customRange };\n  // specific : specific\n  if (SPECIFIC_MODE.includes(sinceMode) && SPECIFIC_MODE.includes(untilMode)) {\n    const since =\n      sinceMode === 'specific' ? dttmToString(sinceDatetime) : sinceMode;\n    const until =\n      untilMode === 'specific' ? dttmToString(untilDatetime) : untilMode;\n    return `${since} : ${until}`;\n  }\n\n  // specific : relative\n  if (SPECIFIC_MODE.includes(sinceMode) && untilMode === 'relative') {\n    const since =\n      sinceMode === 'specific' ? dttmToString(sinceDatetime) : sinceMode;\n    const until = `DATEADD(DATETIME(\"${since}\"), ${untilGrainValue}, ${untilGrain})`;\n    return `${since} : ${until}`;\n  }\n\n  // relative : specific\n  if (sinceMode === 'relative' && SPECIFIC_MODE.includes(untilMode)) {\n    const until =\n      untilMode === 'specific' ? dttmToString(untilDatetime) : untilMode;\n    const since = `DATEADD(DATETIME(\"${until}\"), ${-Math.abs(\n      sinceGrainValue,\n    )}, ${sinceGrain})`;\n    return `${since} : ${until}`;\n  }\n\n  // relative : relative\n  const since = `DATEADD(DATETIME(\"${anchorValue}\"), ${-Math.abs(\n    sinceGrainValue,\n  )}, ${sinceGrain})`;\n  const until = `DATEADD(DATETIME(\"${anchorValue}\"), ${untilGrainValue}, ${untilGrain})`;\n  return `${since} : ${until}`;\n};\n"],"names":["AntdRangePicker","AntdDatePicker","RangePicker","styled","theme","gridUnit","DatePicker","Popover","props","___EmotionJSX","AntdPopover","getSectionContainerElement","_document$getElementB","document","getElementById","lastElementChild","getElementYVisibilityRatioOnContainer","node","_window","_node$getBoundingClie","containerHeight","window","innerHeight","nodePositionInViewport","getBoundingClientRect","top","ControlPopover","getPopupContainer","getVisibilityRatio","visible","visibleProp","destroyTooltipOnHide","triggerElementRef","useRef","setVisible","useState","undefined","defaultVisible","placement","setPlacement","React","calculatePlacement","useCallback","visibilityRatio","current","changeContainerScrollStatus","element","style","setProperty","handleGetPopupContainer","triggerNode","body","handleOnVisibleChange","onVisibleChange","handleDocumentKeyDownListener","event","key","useEffect","addEventListener","removeEventListener","_extends","arrowPointAtCenter","CommonFrame","commonRange","COMMON_RANGE_SET","has","value","onChange","className","t","Radio","Group","e","target","COMMON_RANGE_OPTIONS","map","label","CalendarFrame","CALENDAR_RANGE_SET","PreviousCalendarWeek","CALENDAR_RANGE_OPTIONS","CustomFrame","_locales$LOCALE_MAPPI","customRange","matchedFlag","customTimeRangeDecode","customTimeRangeEncode","sinceDatetime","sinceMode","sinceGrain","sinceGrainValue","untilDatetime","untilMode","untilGrain","untilGrainValue","anchorValue","anchorMode","control","onGrainValue","_isInteger","localFromFlaskBabel","useSelector","state","_state$common","common","locale","datePickerLocale","locales","LOCALE_MAPPING","Row","gutter","Col","span","InfoTooltipWithTrigger","tooltip","Select","ariaLabel","options","SINCE_MODE_OPTIONS","showTime","defaultValue","dttmToMoment","datetime","format","MOMENT_FORMAT","allowClear","InputNumber","placeholder","Math","abs","min","onStep","SINCE_GRAIN_OPTIONS","UNTIL_MODE_OPTIONS","UNTIL_GRAIN_OPTIONS","align","option","radioValue","MIDNIGHT","TIME_PICKER_HELPER","StyledTooltip","useTheme","ClassNames","css","Tooltip","overlayClassName","typography","sizes","m","weights","bold","s","DateFunctionTooltip","title","getAdvancedRange","includes","SEPARATOR","startsWith","join","AdvancedFrame","advancedRange","since","until","split","Input","ACTIVE_BORDER_COLOR","LabelContainer","div","isActive","isPlaceholder","colors","grayscale","light5","light2","borderRadius","light1","dark1","DateLabel","forwardRef","ref","tabIndex","Icons","CalendarOutlined","iconSize","iconColor","base","StyledRangeType","ContentStyleWrapper","medium","IconWrapper","error","getTooltipTitle","isLabelTruncated","range","DateFilterLabel","_props$value","onOpenPopover","noOp","onClosePopover","overlayStyle","isOverflowingFilterBar","defaultTimeFilter","useDefaultTimeFilter","actualTimeRange","setActualTimeRange","show","setShow","guessedFrame","useMemo","guessFrame","frame","setFrame","lastFetchedTimeRange","setLastFetchedTimeRange","timeRangeValue","setTimeRangeValue","validTimeRange","setValidTimeRange","evalResponse","setEvalResponse","tooltipTitle","setTooltipTitle","labelRef","labelIsTruncated","useCSSTextTruncation","onHide","NO_TIME_RANGE","fetchTimeRange","then","actualRange","useDebouncedEffect","SLOW_DEBOUNCE","toggleOverlay","overlayContent","FRAME_OPTIONS","Divider","ErrorSolidSmall","Button","buttonStyle","cta","onClick","disabled","EditAlt","popoverContent","trigger","content","width","parentNode","parentElement","modalContent","Modal","hideFooter","zIndex","ControlHeader","PreviousCalendarMonth","PreviousCalendarYear","formatDateEndpoint","dttm","isStart","replace","formatTimeRange","timeRange","columnPlaceholder","splitDateRange","length","COMMON_RANGE_VALUES_SET","CALENDAR_RANGE_VALUES_SET","async","endpoint","rison","_response$json","_response$json$result","_response$json2","_response$json2$resul","response","SupersetClient","get","timeRangeString","json","result","clientError","getClientErrorObject","message","statusText","buildTimeRangeString","_useSelector","_state$common$conf","conf","DEFAULT_TIME_FILTER","Set","GRAIN_OPTIONS","rel","item","slice","SEVEN_DAYS_AGO","moment","utc","startOf","subtract","en","fr","es","it","zh","ja","de","pt","pt_BR","ru","ko","sk","sl","nl","DateFilterTestKey","iso8601","String","raw","datetimeConstant","grainValue","grain","CUSTOM_RANGE_EXPRESSION","RegExp","ISO8601_AND_CONSTANT","DATETIME_CONSTANT","defaultCustomRange","SPECIFIC_MODE","dttmToString","test","sinceCapturedGroup","match","parseInt","untilCapturedGroup","sinceDttm","untileDttm"],"sourceRoot":""}